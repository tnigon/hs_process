<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="python">
  <head>
    <meta charset="utf-8" />
    <title>7. Tutorial: batch &#8212; hs_process 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="8. API" href="my_hs_process_api.html" />
    <link rel="prev" title="6. Tutorial: spatial_mod" href="tutorial_spatial_mod.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          hs_process</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://github.com/tnigon/hs_process">Github</a></li>
                <li><a href="http://www.spectralpython.net/">Spectral Python</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Contents <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Home</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">1. Setup and Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_hsio.html">2. Tutorial: <code class="docutils literal notranslate"><span class="pre">hsio</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_hstools.html">3. Tutorial: <code class="docutils literal notranslate"><span class="pre">hstools</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_segment.html">4. Tutorial: <code class="docutils literal notranslate"><span class="pre">segment</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_spec_mod.html">5. Tutorial: <code class="docutils literal notranslate"><span class="pre">spec_mod</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_spatial_mod.html">6. Tutorial: <code class="docutils literal notranslate"><span class="pre">spatial_mod</span></code></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">7. Tutorial: <code class="docutils literal notranslate"><span class="pre">batch</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="my_hs_process_api.html">8. API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/hs_process.batch.html">8.1.1. batch</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/hs_process.defaults.html">8.1.2. defaults</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/hs_process.hsio.html">8.1.3. hsio</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/hs_process.hstools.html">8.1.4. hstools</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/hs_process.segment.html">8.1.5. segment</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/hs_process.spatial_mod.html">8.1.6. spatial_mod</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/hs_process.spec_mod.html">8.1.7. spec_mod</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="license.html">9. License</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html">10. Change Log</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">1. Setup and Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_hsio.html">2. Tutorial: <code class="docutils literal notranslate"><span class="pre">hsio</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_hstools.html">3. Tutorial: <code class="docutils literal notranslate"><span class="pre">hstools</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_segment.html">4. Tutorial: <code class="docutils literal notranslate"><span class="pre">segment</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_spec_mod.html">5. Tutorial: <code class="docutils literal notranslate"><span class="pre">spec_mod</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_spatial_mod.html">6. Tutorial: <code class="docutils literal notranslate"><span class="pre">spatial_mod</span></code></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">7. Tutorial: <code class="docutils literal notranslate"><span class="pre">batch</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="my_hs_process_api.html">8. API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/hs_process.batch.html">8.1.1. batch</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/hs_process.defaults.html">8.1.2. defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/hs_process.hsio.html">8.1.3. hsio</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/hs_process.hstools.html">8.1.4. hstools</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/hs_process.segment.html">8.1.5. segment</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/hs_process.spatial_mod.html">8.1.6. spatial_mod</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/hs_process.spec_mod.html">8.1.7. spec_mod</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">9. License</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">10. Change Log</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="tutorial_spatial_mod.html" title="Previous Chapter: 6. Tutorial: spatial_mod"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; 6. Tutorial: ...</span>
    </a>
  </li>
  <li>
    <a href="my_hs_process_api.html" title="Next Chapter: 8. API"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">8. API &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/tutorial_batch.ipynb.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">7. Tutorial: <code class="docutils literal notranslate"><span class="pre">batch</span></code></a><ul>
<li><a class="reference internal" href="#Sample-data">7.1. Sample data</a></li>
<li><a class="reference internal" href="#Confirm-your-environment">7.2. Confirm your environment</a></li>
<li><a class="reference internal" href="#batch.cube_to_spectra">7.3. <code class="docutils literal notranslate"><span class="pre">batch.cube_to_spectra</span></code></a></li>
<li><a class="reference internal" href="#batch.segment_band_math">7.4. <code class="docutils literal notranslate"><span class="pre">batch.segment_band_math</span></code></a></li>
<li><a class="reference internal" href="#batch.segment_create_mask">7.5. <code class="docutils literal notranslate"><span class="pre">batch.segment_create_mask</span></code></a></li>
<li><a class="reference internal" href="#batch.spatial_crop">7.6. <code class="docutils literal notranslate"><span class="pre">batch.spatial_crop</span></code></a></li>
<li><a class="reference internal" href="#batch.spectra_combine">7.7. <code class="docutils literal notranslate"><span class="pre">batch.spectra_combine</span></code></a></li>
<li><a class="reference internal" href="#batch.spectra_to_csv">7.8. <code class="docutils literal notranslate"><span class="pre">batch.spectra_to_csv</span></code></a></li>
<li><a class="reference internal" href="#batch.spectra_to_df">7.9. <code class="docutils literal notranslate"><span class="pre">batch.spectra_to_df</span></code></a></li>
<li><a class="reference internal" href="#batch.spectral_clip">7.10. <code class="docutils literal notranslate"><span class="pre">batch.spectral_clip</span></code></a></li>
<li><a class="reference internal" href="#batch.spectral_smooth">7.11. <code class="docutils literal notranslate"><span class="pre">batch.spectral_smooth</span></code></a></li>
</ul>
</li>
</ul>

<form action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    min-width: 5.5ex;
    padding-top: 0.3rem;
    padding-right: 0.3rem;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 0.3rem;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Tutorial:-batch">
<h1><span class="section-number">7. </span>Tutorial: <code class="docutils literal notranslate"><span class="pre">batch</span></code><a class="headerlink" href="#Tutorial:-batch" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">hs_process.batch</span></code> extends the functionality of the core modules of <code class="docutils literal notranslate"><span class="pre">hs_process</span></code> (<a class="reference external" href="api/hs_process.segment.html#hs_process.segment">segment</a>, <a class="reference external" href="api/hs_process.spatial_mod.html#hs_process.spatial_mod">spatial_mod</a>, and <a class="reference external" href="api/hs_process.spec_mod.html#hs_process.spec_mod">spec_mod</a>) so that image processing can run via a <em>relatively straightforward</em> script without end user interaction.</p>
<p>The overall goal of the <code class="docutils literal notranslate"><span class="pre">batch</span></code> module is to implement many post-processing steps across many datacubes via an easy-to-use API. It was designed to save all data products (intermediate or final) to disk. Any unwanted files must be manually deleted by the user.</p>
<hr class="docutils" />
<div class="section" id="Sample-data">
<h2><span class="section-number">7.1. </span>Sample data<a class="headerlink" href="#Sample-data" title="Permalink to this headline">¶</a></h2>
<p>Sample imagery captured from a <a class="reference external" href="https://resonon.com/">Resonon</a> Pika II VIS-NIR line scanning imager and ancillary sample files can be downloaded from this <a class="reference external" href="https://drive.google.com/drive/folders/1KpOBB4-qghedVFd8ukQngXNwUit8PFy_?usp=sharing">link</a>.</p>
<p>Before trying this tutorial on your own machine, please download the <a class="reference external" href="https://drive.google.com/drive/folders/1KpOBB4-qghedVFd8ukQngXNwUit8PFy_?usp=sharing">sample files</a> and place into a local directory of your choosing (and do not change the file names). Indicate the location of your sample files by modifying <code class="docutils literal notranslate"><span class="pre">data_dir</span></code>:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data_dir</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;F:</span><span class="se">\\</span><span class="s1">nigo0024\Documents\hs_process_demo&#39;</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="Confirm-your-environment">
<h2><span class="section-number">7.2. </span>Confirm your environment<a class="headerlink" href="#Confirm-your-environment" title="Permalink to this headline">¶</a></h2>
<p>Before trying the tutorials, be sure <code class="docutils literal notranslate"><span class="pre">hs_process</span></code> and its dependencies are <a class="reference external" href="installation.html#">properly installed</a>. If you installed in a <em>virtual environment</em>, first check we are indeed using the Python instance that was installed with the virtual environment:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Python install location: </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Python install location: C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\python.exe
</pre></div></div>
</div>
<p>The <em>spec</em> folder that contains <code class="docutils literal notranslate"><span class="pre">python.exe</span></code> tells me that the activated Python instance is indeed in the <code class="docutils literal notranslate"><span class="pre">spec</span></code> environment, just as I intend. If you created a virtual environment, but your <code class="docutils literal notranslate"><span class="pre">python.exe</span></code> is not in the <code class="docutils literal notranslate"><span class="pre">envs\spec</span></code> directory, you either did not properly create your virtual environment or you are not pointing to the correct Python installation in your IDE (e.g., Spyder, Jupyter notebook, etc.).</p>
</div>
<hr class="docutils" />
<div class="section" id="batch.cube_to_spectra">
<h2><span class="section-number">7.3. </span><code class="docutils literal notranslate"><span class="pre">batch.cube_to_spectra</span></code><a class="headerlink" href="#batch.cube_to_spectra" title="Permalink to this headline">¶</a></h2>
<p>Calculates the mean and standard deviation for each cube in <code class="docutils literal notranslate"><span class="pre">fname_list</span></code> and writes the result to a “.spec” file. <a class="reference external" href="api/hs_process.batch.html#hs_process.batch.cube_to_spectra">[API]</a></p>
<p><strong>Note:</strong> The following <code class="docutils literal notranslate"><span class="pre">batch</span></code> example builds on the results of the <code class="docutils literal notranslate"><span class="pre">`spatial_mod.crop_many_gdf</span></code> tutorial &lt;tutorial_spatial_mod.html#spatial_mod.crop_many_gdf&gt;`__. Please complete the <code class="docutils literal notranslate"><span class="pre">`spatial_mod.crop_many_gdf</span></code> &lt;tutorial_spatial_mod.html#spatial_mod.crop_many_gdf&gt;`__ example to be sure your directory (i.e., <code class="docutils literal notranslate"><span class="pre">base_dir</span></code>) is populated with multiple hyperspectral datacubes. The following example will be using datacubes located in the following directory:
<code class="docutils literal notranslate"><span class="pre">F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf</span></code></p>
<p>Load and initialize the <code class="docutils literal notranslate"><span class="pre">batch</span></code> module, checking to be sure the directory exists.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">hs_process</span> <span class="kn">import</span> <span class="n">batch</span>

<span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">&#39;spatial_mod&#39;</span><span class="p">,</span> <span class="s1">&#39;crop_many_gdf&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">base_dir</span><span class="p">))</span>
<span class="n">hsbatch</span> <span class="o">=</span> <span class="n">batch</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">search_ext</span><span class="o">=</span><span class="s1">&#39;.bip&#39;</span><span class="p">)</span>  <span class="c1"># searches for all files in ``base_dir`` with a &quot;.bip&quot; file extension</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">batch.cube_to_spectra</span></code> to calculate the <em>mean</em> and <em>standard deviation</em> across all pixels for each of the datacubes in <code class="docutils literal notranslate"><span class="pre">base_dir</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">hsbatch</span><span class="o">.</span><span class="n">cube_to_spectra</span><span class="p">(</span><span class="n">base_dir</span><span class="o">=</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">geotiff</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">out_force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1011-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1011-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1012-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1012-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1013-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1013-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1014-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1014-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1015-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1015-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1016-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1016-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1017-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1017-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1018-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1018-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_611-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_611-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_612-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_612-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_613-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_613-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_614-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_614-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_615-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_615-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_616-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_616-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_617-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_617-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_618-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_618-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_711-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_711-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_712-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_712-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_713-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_713-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_714-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_714-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_715-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_715-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_716-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_716-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_717-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_717-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_718-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_718-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_811-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_811-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_812-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_812-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_813-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_813-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_814-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_814-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_815-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_815-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_816-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_816-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_817-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_817-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_818-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_818-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_911-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_911-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_912-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_912-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_913-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_913-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_914-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_914-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_915-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_915-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_916-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_916-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_917-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_917-cube-to-spec-mean.spec

Calculating mean spectra: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\Wells_rep2_20180628_16h56m_pika_gige_7_plot_918-crop-many-gdf.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\cube_to_spec\Wells_rep2_20180628_16h56m_pika_gige_7_plot_918-cube-to-spec-mean.spec
</pre></div></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">`seaborn</span></code> &lt;<a class="reference external" href="https://seaborn.pydata.org/index.html">https://seaborn.pydata.org/index.html</a>&gt;`__ to visualize the spectra of plots 1011, 1012, and 1013. Notice how <code class="docutils literal notranslate"><span class="pre">hsbatch.io.name_plot</span></code> is utilized to retrieve the plot ID, and how the <em>“history”</em> tag is referenced from the metadata to determine the number of pixels whose reflectance was averaged to create the mean spectra. Also remember that pixels across the original input image likely represent a combination of soil, vegetation, and shadow.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="n">fname_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">&#39;spatial_mod&#39;</span><span class="p">,</span> <span class="s1">&#39;crop_many_gdf&#39;</span><span class="p">,</span> <span class="s1">&#39;cube_to_spec&#39;</span><span class="p">,</span> <span class="s1">&#39;Wells_rep2_20180628_16h56m_pika_gige_7_plot_1011-cube-to-spec-mean.spec&#39;</span><span class="p">),</span>
              <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">&#39;spatial_mod&#39;</span><span class="p">,</span> <span class="s1">&#39;crop_many_gdf&#39;</span><span class="p">,</span> <span class="s1">&#39;cube_to_spec&#39;</span><span class="p">,</span> <span class="s1">&#39;Wells_rep2_20180628_16h56m_pika_gige_7_plot_1012-cube-to-spec-mean.spec&#39;</span><span class="p">),</span>
              <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">&#39;spatial_mod&#39;</span><span class="p">,</span> <span class="s1">&#39;crop_many_gdf&#39;</span><span class="p">,</span> <span class="s1">&#39;cube_to_spec&#39;</span><span class="p">,</span> <span class="s1">&#39;Wells_rep2_20180628_16h56m_pika_gige_7_plot_1013-cube-to-spec-mean.spec&#39;</span><span class="p">)]</span>

<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">fname</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">fname_list</span><span class="p">,</span> <span class="n">colors</span><span class="p">):</span>
    <span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_spec</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
    <span class="n">meta_bands</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">meta_bands</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">spyfile_spec</span><span class="o">.</span><span class="n">load</span><span class="p">()</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span>
    <span class="n">hist</span> <span class="o">=</span> <span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">spyfile_spec</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">]</span>
    <span class="n">pix_n</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;&lt;pixel number: (.*)&gt;&#39;</span><span class="p">,</span> <span class="n">hist</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">meta_bands</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Plot &#39;</span><span class="o">+</span><span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">name_plot</span><span class="o">+</span><span class="s1">&#39; (n=&#39;</span><span class="o">+</span><span class="n">pix_n</span><span class="o">+</span><span class="s1">&#39;)&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Wavelength (nm)&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Reflectance (%)&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;API Example: `batch.cube_to_spectra`&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0.5, 1.0, &#39;API Example: `batch.cube_to_spectra`&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_9_1.png" src="_images/tutorial_batch_9_1.png" />
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="batch.segment_band_math">
<h2><span class="section-number">7.4. </span><code class="docutils literal notranslate"><span class="pre">batch.segment_band_math</span></code><a class="headerlink" href="#batch.segment_band_math" title="Permalink to this headline">¶</a></h2>
<p>Batch processing tool to perform band math on multiple datacubes in the same way. <code class="docutils literal notranslate"><span class="pre">batch.segment_band_math</span></code> is typically used prior to <code class="docutils literal notranslate"><span class="pre">batch.segment_create_mask</span></code> to generate the images/directory required for the masking process. <a class="reference external" href="api/hs_process.batch.html#hs_process.batch.segment_band_math">[API]</a></p>
<p><strong>Note:</strong> The following <code class="docutils literal notranslate"><span class="pre">batch</span></code> example builds on the results of the <code class="docutils literal notranslate"><span class="pre">`spatial_mod.crop_many_gdf</span></code> tutorial &lt;tutorial_spatial_mod.html#spatial_mod.crop_many_gdf&gt;`__. Please complete the <code class="docutils literal notranslate"><span class="pre">`spatial_mod.crop_many_gdf</span></code> &lt;tutorial_spatial_mod.html#spatial_mod.crop_many_gdf&gt;`__ example to be sure your directory (i.e., <code class="docutils literal notranslate"><span class="pre">base_dir</span></code>) is populated with multiple hyperspectral datacubes. The following example will be using datacubes located in the following directory:
<code class="docutils literal notranslate"><span class="pre">F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf</span></code></p>
<p>Load and initialize the <code class="docutils literal notranslate"><span class="pre">batch</span></code> module, checking to be sure the directory exists.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">hs_process</span> <span class="kn">import</span> <span class="n">batch</span>

<span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">&#39;spatial_mod&#39;</span><span class="p">,</span> <span class="s1">&#39;crop_many_gdf&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">base_dir</span><span class="p">))</span>
<span class="n">hsbatch</span> <span class="o">=</span> <span class="n">batch</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">search_ext</span><span class="o">=</span><span class="s1">&#39;.bip&#39;</span><span class="p">)</span>  <span class="c1"># searches for all files in ``base_dir`` with a &quot;.bip&quot; file extension</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">batch.segment_band_math</span></code> to compute the MCARI2 (Modified Chlorophyll Absorption Ratio Index Improved; Haboudane et al., 2004) spectral index for each of the datacubes in <code class="docutils literal notranslate"><span class="pre">base_dir</span></code>. See <code class="docutils literal notranslate"><span class="pre">Harris</span> <span class="pre">Geospatial</span></code>_ for more information about the MCARI2 spectral index and references to other spectral indices.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">folder_name</span> <span class="o">=</span> <span class="s1">&#39;band_math_mcari2-800-670-550&#39;</span>  <span class="c1"># folder name can be modified to be more descriptive in what type of band math is being performed</span>
<span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;mcari2&#39;</span>  <span class="c1"># must be one of &quot;ndi&quot;, &quot;ratio&quot;, &quot;derivative&quot;, or &quot;mcari2&quot;</span>
<span class="n">wl1</span> <span class="o">=</span> <span class="mi">800</span>
<span class="n">wl2</span> <span class="o">=</span> <span class="mi">670</span>
<span class="n">wl3</span> <span class="o">=</span> <span class="mi">550</span>
<span class="n">hsbatch</span><span class="o">.</span><span class="n">segment_band_math</span><span class="p">(</span><span class="n">base_dir</span><span class="o">=</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">folder_name</span><span class="o">=</span><span class="n">folder_name</span><span class="p">,</span>
                          <span class="n">name_append</span><span class="o">=</span><span class="s1">&#39;band-math&#39;</span><span class="p">,</span> <span class="n">geotiff</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">wl1</span><span class="o">=</span><span class="n">wl1</span><span class="p">,</span> <span class="n">wl2</span><span class="o">=</span><span class="n">wl2</span><span class="p">,</span> <span class="n">wl3</span><span class="o">=</span><span class="n">wl3</span><span class="p">,</span>
                          <span class="n">plot_out</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">out_force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1011-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1012-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1013-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1014-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1015-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1016-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1017-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1018-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_611-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_612-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_613-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_614-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_615-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_616-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_617-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_618-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_711-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_712-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_713-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_714-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_715-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_716-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_717-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_718-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_811-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_812-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_813-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_814-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_815-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_816-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_817-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_818-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_911-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_912-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_913-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_914-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_915-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_916-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_917-band-math-mcari2-800-670-550.bip



Bands used (``b1``): [198]
Bands used (``b2``): [135]
Bands used (``b3``): [77]

Wavelengths used (``b1``): [799.0016]
Wavelengths used (``b2``): [669.6752]
Wavelengths used (``b3``): [550.6128]

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:2702: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  fig, ax = plt.subplots()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550\Wells_rep2_20180628_16h56m_pika_gige_7_plot_918-band-math-mcari2-800-670-550.bip


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_41.png" src="_images/tutorial_batch_13_41.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_42.png" src="_images/tutorial_batch_13_42.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_43.png" src="_images/tutorial_batch_13_43.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_44.png" src="_images/tutorial_batch_13_44.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_45.png" src="_images/tutorial_batch_13_45.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_46.png" src="_images/tutorial_batch_13_46.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_47.png" src="_images/tutorial_batch_13_47.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_48.png" src="_images/tutorial_batch_13_48.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_49.png" src="_images/tutorial_batch_13_49.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_50.png" src="_images/tutorial_batch_13_50.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_51.png" src="_images/tutorial_batch_13_51.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_52.png" src="_images/tutorial_batch_13_52.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_53.png" src="_images/tutorial_batch_13_53.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_54.png" src="_images/tutorial_batch_13_54.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_55.png" src="_images/tutorial_batch_13_55.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_56.png" src="_images/tutorial_batch_13_56.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_57.png" src="_images/tutorial_batch_13_57.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_58.png" src="_images/tutorial_batch_13_58.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_59.png" src="_images/tutorial_batch_13_59.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_60.png" src="_images/tutorial_batch_13_60.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_61.png" src="_images/tutorial_batch_13_61.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_62.png" src="_images/tutorial_batch_13_62.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_63.png" src="_images/tutorial_batch_13_63.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_64.png" src="_images/tutorial_batch_13_64.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_65.png" src="_images/tutorial_batch_13_65.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_66.png" src="_images/tutorial_batch_13_66.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_67.png" src="_images/tutorial_batch_13_67.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_68.png" src="_images/tutorial_batch_13_68.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_69.png" src="_images/tutorial_batch_13_69.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_70.png" src="_images/tutorial_batch_13_70.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_71.png" src="_images/tutorial_batch_13_71.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_72.png" src="_images/tutorial_batch_13_72.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_73.png" src="_images/tutorial_batch_13_73.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_74.png" src="_images/tutorial_batch_13_74.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_75.png" src="_images/tutorial_batch_13_75.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_76.png" src="_images/tutorial_batch_13_76.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_77.png" src="_images/tutorial_batch_13_77.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_78.png" src="_images/tutorial_batch_13_78.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_79.png" src="_images/tutorial_batch_13_79.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_13_80.png" src="_images/tutorial_batch_13_80.png" />
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">batch.segment_band_math</span></code> creates a new folder in <code class="docutils literal notranslate"><span class="pre">base_dir</span></code> (in this case the new directory is <code class="docutils literal notranslate"><span class="pre">F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550</span></code>), which contains several data products.</p>
<p>The <strong>first</strong> is <code class="docutils literal notranslate"><span class="pre">band-math-stats.csv</span></code>: a spreadsheet containing summary statistics for each of the image cubes that were processed via <code class="docutils literal notranslate"><span class="pre">batch.segment_band_math</span></code>; stats include <em>pixel count</em>, <em>mean</em>, <em>standard deviation</em>, <em>median</em>, and <em>percentiles</em> across all image pixels.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">&#39;spatial_mod&#39;</span><span class="p">,</span> <span class="s1">&#39;crop_many_gdf&#39;</span><span class="p">,</span> <span class="s1">&#39;band_math_mcari2-800-670-550&#39;</span><span class="p">,</span> <span class="s1">&#39;band-math-stats.csv&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fname</th>
      <th>plot_id</th>
      <th>count</th>
      <th>mean</th>
      <th>std_dev</th>
      <th>median</th>
      <th>pctl_10th</th>
      <th>pctl_25th</th>
      <th>pctl_50th</th>
      <th>pctl_75th</th>
      <th>pctl_90th</th>
      <th>pctl_95th</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1011</td>
      <td>3391</td>
      <td>0.622999</td>
      <td>0.154441</td>
      <td>0.647932</td>
      <td>0.400957</td>
      <td>0.526855</td>
      <td>0.647932</td>
      <td>0.743904</td>
      <td>0.802663</td>
      <td>0.825942</td>
    </tr>
    <tr>
      <th>1</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1012</td>
      <td>4902</td>
      <td>0.627408</td>
      <td>0.137226</td>
      <td>0.651605</td>
      <td>0.432411</td>
      <td>0.545338</td>
      <td>0.651605</td>
      <td>0.732981</td>
      <td>0.783473</td>
      <td>0.806512</td>
    </tr>
    <tr>
      <th>2</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1013</td>
      <td>4902</td>
      <td>0.483455</td>
      <td>0.170385</td>
      <td>0.491520</td>
      <td>0.244630</td>
      <td>0.349948</td>
      <td>0.491520</td>
      <td>0.626670</td>
      <td>0.698892</td>
      <td>0.737506</td>
    </tr>
    <tr>
      <th>3</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1014</td>
      <td>4902</td>
      <td>0.582990</td>
      <td>0.175643</td>
      <td>0.618471</td>
      <td>0.315483</td>
      <td>0.473933</td>
      <td>0.618471</td>
      <td>0.727224</td>
      <td>0.779835</td>
      <td>0.804277</td>
    </tr>
    <tr>
      <th>4</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1015</td>
      <td>4902</td>
      <td>0.582303</td>
      <td>0.161018</td>
      <td>0.597912</td>
      <td>0.351104</td>
      <td>0.461747</td>
      <td>0.597912</td>
      <td>0.716367</td>
      <td>0.782069</td>
      <td>0.809144</td>
    </tr>
    <tr>
      <th>5</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1016</td>
      <td>4902</td>
      <td>0.610922</td>
      <td>0.141988</td>
      <td>0.632506</td>
      <td>0.416628</td>
      <td>0.514711</td>
      <td>0.632506</td>
      <td>0.723370</td>
      <td>0.777661</td>
      <td>0.803735</td>
    </tr>
    <tr>
      <th>6</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1017</td>
      <td>4902</td>
      <td>0.535699</td>
      <td>0.189333</td>
      <td>0.550865</td>
      <td>0.263800</td>
      <td>0.386807</td>
      <td>0.550865</td>
      <td>0.698782</td>
      <td>0.775264</td>
      <td>0.804146</td>
    </tr>
    <tr>
      <th>7</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1018</td>
      <td>4771</td>
      <td>0.461022</td>
      <td>0.203118</td>
      <td>0.467969</td>
      <td>0.177923</td>
      <td>0.294047</td>
      <td>0.467969</td>
      <td>0.629451</td>
      <td>0.730637</td>
      <td>0.772134</td>
    </tr>
    <tr>
      <th>8</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>611</td>
      <td>4509</td>
      <td>0.656765</td>
      <td>0.147861</td>
      <td>0.688531</td>
      <td>0.438843</td>
      <td>0.566915</td>
      <td>0.688531</td>
      <td>0.769568</td>
      <td>0.822617</td>
      <td>0.846559</td>
    </tr>
    <tr>
      <th>9</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>612</td>
      <td>4902</td>
      <td>0.616951</td>
      <td>0.168515</td>
      <td>0.648011</td>
      <td>0.367709</td>
      <td>0.517278</td>
      <td>0.648011</td>
      <td>0.749566</td>
      <td>0.809077</td>
      <td>0.835821</td>
    </tr>
    <tr>
      <th>10</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>613</td>
      <td>4902</td>
      <td>0.553968</td>
      <td>0.175042</td>
      <td>0.569500</td>
      <td>0.303841</td>
      <td>0.428101</td>
      <td>0.569500</td>
      <td>0.696116</td>
      <td>0.773253</td>
      <td>0.808112</td>
    </tr>
    <tr>
      <th>11</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>614</td>
      <td>4902</td>
      <td>0.597483</td>
      <td>0.171152</td>
      <td>0.631154</td>
      <td>0.339392</td>
      <td>0.496289</td>
      <td>0.631154</td>
      <td>0.729858</td>
      <td>0.790967</td>
      <td>0.821224</td>
    </tr>
    <tr>
      <th>12</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>615</td>
      <td>4902</td>
      <td>0.673210</td>
      <td>0.145662</td>
      <td>0.709712</td>
      <td>0.462546</td>
      <td>0.587136</td>
      <td>0.709712</td>
      <td>0.782980</td>
      <td>0.831123</td>
      <td>0.852142</td>
    </tr>
    <tr>
      <th>13</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>616</td>
      <td>4902</td>
      <td>0.643378</td>
      <td>0.154725</td>
      <td>0.669742</td>
      <td>0.416074</td>
      <td>0.538374</td>
      <td>0.669742</td>
      <td>0.771166</td>
      <td>0.825665</td>
      <td>0.845516</td>
    </tr>
    <tr>
      <th>14</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>617</td>
      <td>4902</td>
      <td>0.656940</td>
      <td>0.139822</td>
      <td>0.683504</td>
      <td>0.458762</td>
      <td>0.569568</td>
      <td>0.683503</td>
      <td>0.764074</td>
      <td>0.817668</td>
      <td>0.843806</td>
    </tr>
    <tr>
      <th>15</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>618</td>
      <td>4428</td>
      <td>0.387672</td>
      <td>0.203790</td>
      <td>0.370099</td>
      <td>0.118169</td>
      <td>0.225142</td>
      <td>0.370099</td>
      <td>0.543578</td>
      <td>0.684901</td>
      <td>0.737255</td>
    </tr>
    <tr>
      <th>16</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>711</td>
      <td>4420</td>
      <td>0.668268</td>
      <td>0.146896</td>
      <td>0.698327</td>
      <td>0.450712</td>
      <td>0.592763</td>
      <td>0.698327</td>
      <td>0.779889</td>
      <td>0.829517</td>
      <td>0.850028</td>
    </tr>
    <tr>
      <th>17</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>712</td>
      <td>4902</td>
      <td>0.559168</td>
      <td>0.174761</td>
      <td>0.581612</td>
      <td>0.306548</td>
      <td>0.433534</td>
      <td>0.581612</td>
      <td>0.701241</td>
      <td>0.775299</td>
      <td>0.804926</td>
    </tr>
    <tr>
      <th>18</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>713</td>
      <td>4902</td>
      <td>0.607665</td>
      <td>0.154029</td>
      <td>0.629656</td>
      <td>0.385508</td>
      <td>0.495919</td>
      <td>0.629656</td>
      <td>0.730492</td>
      <td>0.793064</td>
      <td>0.821173</td>
    </tr>
    <tr>
      <th>19</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>714</td>
      <td>4902</td>
      <td>0.643979</td>
      <td>0.145662</td>
      <td>0.669699</td>
      <td>0.433602</td>
      <td>0.555764</td>
      <td>0.669699</td>
      <td>0.757467</td>
      <td>0.811623</td>
      <td>0.834519</td>
    </tr>
    <tr>
      <th>20</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>715</td>
      <td>4902</td>
      <td>0.676225</td>
      <td>0.131577</td>
      <td>0.701983</td>
      <td>0.491954</td>
      <td>0.595112</td>
      <td>0.701983</td>
      <td>0.777706</td>
      <td>0.823654</td>
      <td>0.845295</td>
    </tr>
    <tr>
      <th>21</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>716</td>
      <td>4902</td>
      <td>0.647595</td>
      <td>0.154707</td>
      <td>0.674044</td>
      <td>0.427830</td>
      <td>0.551009</td>
      <td>0.674044</td>
      <td>0.770835</td>
      <td>0.825209</td>
      <td>0.845347</td>
    </tr>
    <tr>
      <th>22</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>717</td>
      <td>4902</td>
      <td>0.595904</td>
      <td>0.175812</td>
      <td>0.622344</td>
      <td>0.338291</td>
      <td>0.468473</td>
      <td>0.622344</td>
      <td>0.742585</td>
      <td>0.808163</td>
      <td>0.835378</td>
    </tr>
    <tr>
      <th>23</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>718</td>
      <td>4572</td>
      <td>0.598879</td>
      <td>0.170721</td>
      <td>0.619992</td>
      <td>0.350020</td>
      <td>0.484726</td>
      <td>0.619992</td>
      <td>0.737969</td>
      <td>0.804381</td>
      <td>0.833905</td>
    </tr>
    <tr>
      <th>24</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>811</td>
      <td>4637</td>
      <td>0.600566</td>
      <td>0.166630</td>
      <td>0.628951</td>
      <td>0.349802</td>
      <td>0.491700</td>
      <td>0.628951</td>
      <td>0.731163</td>
      <td>0.794902</td>
      <td>0.823018</td>
    </tr>
    <tr>
      <th>25</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>812</td>
      <td>4902</td>
      <td>0.605677</td>
      <td>0.167928</td>
      <td>0.632154</td>
      <td>0.364169</td>
      <td>0.489403</td>
      <td>0.632154</td>
      <td>0.743962</td>
      <td>0.802737</td>
      <td>0.827457</td>
    </tr>
    <tr>
      <th>26</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>813</td>
      <td>4902</td>
      <td>0.431073</td>
      <td>0.243523</td>
      <td>0.409112</td>
      <td>0.114352</td>
      <td>0.218758</td>
      <td>0.409112</td>
      <td>0.649587</td>
      <td>0.776116</td>
      <td>0.823458</td>
    </tr>
    <tr>
      <th>27</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>814</td>
      <td>4902</td>
      <td>0.496507</td>
      <td>0.195254</td>
      <td>0.503804</td>
      <td>0.226004</td>
      <td>0.337406</td>
      <td>0.503804</td>
      <td>0.660399</td>
      <td>0.756241</td>
      <td>0.794438</td>
    </tr>
    <tr>
      <th>28</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>815</td>
      <td>4902</td>
      <td>0.538546</td>
      <td>0.178378</td>
      <td>0.565725</td>
      <td>0.279082</td>
      <td>0.401758</td>
      <td>0.565725</td>
      <td>0.684339</td>
      <td>0.755182</td>
      <td>0.786442</td>
    </tr>
    <tr>
      <th>29</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>816</td>
      <td>4902</td>
      <td>0.518513</td>
      <td>0.186971</td>
      <td>0.538671</td>
      <td>0.247172</td>
      <td>0.376761</td>
      <td>0.538671</td>
      <td>0.673496</td>
      <td>0.753916</td>
      <td>0.789712</td>
    </tr>
    <tr>
      <th>30</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>817</td>
      <td>4902</td>
      <td>0.557158</td>
      <td>0.204835</td>
      <td>0.588147</td>
      <td>0.257992</td>
      <td>0.390317</td>
      <td>0.588147</td>
      <td>0.735475</td>
      <td>0.807100</td>
      <td>0.831925</td>
    </tr>
    <tr>
      <th>31</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>818</td>
      <td>4671</td>
      <td>0.417009</td>
      <td>0.216439</td>
      <td>0.424725</td>
      <td>0.113556</td>
      <td>0.226294</td>
      <td>0.424725</td>
      <td>0.601759</td>
      <td>0.702425</td>
      <td>0.746479</td>
    </tr>
    <tr>
      <th>32</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>911</td>
      <td>4262</td>
      <td>0.641003</td>
      <td>0.132834</td>
      <td>0.660313</td>
      <td>0.461422</td>
      <td>0.563003</td>
      <td>0.660314</td>
      <td>0.740143</td>
      <td>0.797024</td>
      <td>0.821450</td>
    </tr>
    <tr>
      <th>33</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>912</td>
      <td>4902</td>
      <td>0.591976</td>
      <td>0.154626</td>
      <td>0.617426</td>
      <td>0.370280</td>
      <td>0.490372</td>
      <td>0.617426</td>
      <td>0.714179</td>
      <td>0.769401</td>
      <td>0.798577</td>
    </tr>
    <tr>
      <th>34</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>913</td>
      <td>4902</td>
      <td>0.313236</td>
      <td>0.216132</td>
      <td>0.248242</td>
      <td>0.078397</td>
      <td>0.127170</td>
      <td>0.248242</td>
      <td>0.485217</td>
      <td>0.660092</td>
      <td>0.709468</td>
    </tr>
    <tr>
      <th>35</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>914</td>
      <td>4902</td>
      <td>0.584457</td>
      <td>0.191869</td>
      <td>0.623407</td>
      <td>0.284599</td>
      <td>0.456739</td>
      <td>0.623407</td>
      <td>0.741876</td>
      <td>0.805188</td>
      <td>0.832602</td>
    </tr>
    <tr>
      <th>36</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>915</td>
      <td>4902</td>
      <td>0.617625</td>
      <td>0.151444</td>
      <td>0.649946</td>
      <td>0.396214</td>
      <td>0.529203</td>
      <td>0.649946</td>
      <td>0.733026</td>
      <td>0.785895</td>
      <td>0.812817</td>
    </tr>
    <tr>
      <th>37</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>916</td>
      <td>4902</td>
      <td>0.578913</td>
      <td>0.170426</td>
      <td>0.605810</td>
      <td>0.330164</td>
      <td>0.461928</td>
      <td>0.605810</td>
      <td>0.716162</td>
      <td>0.783080</td>
      <td>0.813501</td>
    </tr>
    <tr>
      <th>38</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>917</td>
      <td>4902</td>
      <td>0.585673</td>
      <td>0.173812</td>
      <td>0.606694</td>
      <td>0.336443</td>
      <td>0.455709</td>
      <td>0.606694</td>
      <td>0.731889</td>
      <td>0.800069</td>
      <td>0.827321</td>
    </tr>
    <tr>
      <th>39</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>918</td>
      <td>4773</td>
      <td>0.600146</td>
      <td>0.163870</td>
      <td>0.629006</td>
      <td>0.366870</td>
      <td>0.488297</td>
      <td>0.629006</td>
      <td>0.730423</td>
      <td>0.791783</td>
      <td>0.820695</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p><strong>Second</strong> is a <code class="docutils literal notranslate"><span class="pre">geotiff</span></code> file for each of the image cubes after the band math processing. This can be opened in <em>QGIS</em> to visualize in a spatial reference system, or can be opened using any software that supports floating point <em>.tif</em> files.</p>
<p><img alt="band-math-mcari2-tif" src="_images/segment_band_math_plot_611-band-math-mcari2-800-670-550_tif1.png" /></p>
<p><strong>Third</strong> is the band math raster saved in the <em>.hdr</em> file format. Note that the data conained here should be the same as in the <em>.tif</em> file, so it’s a matter of preference as to what may be more useful. This single band <em>.hdr</em> can also be opend in <em>QGIS</em>.</p>
<p><strong>Fourth</strong> is a histogram of the band math data contained in the image. The histogram illustrates the 90th percentile value, which may be useful in the segmentation step (e.g., see <code class="docutils literal notranslate"><span class="pre">`batch.segment_create_mask</span></code> &lt;tutorial_batch.html#batch.segment_create_mask&gt;`__).</p>
<p><img alt="band-math-mcari2" src="_images/segment_band_math_plot_611-band-math-mcari2-800-670-5501.png" /></p>
</div>
<hr class="docutils" />
<div class="section" id="batch.segment_create_mask">
<h2><span class="section-number">7.5. </span><code class="docutils literal notranslate"><span class="pre">batch.segment_create_mask</span></code><a class="headerlink" href="#batch.segment_create_mask" title="Permalink to this headline">¶</a></h2>
<p>Batch processing tool to create a masked array on many datacubes. <code class="docutils literal notranslate"><span class="pre">batch.segment_create_mask</span></code> is typically used after <code class="docutils literal notranslate"><span class="pre">batch.segment_band_math</span></code> to mask all the datacubes in a directory based on the result of the band math process. <a class="reference external" href="api/hs_process.batch.html#hs_process.batch.segment_create_mask">[API]</a></p>
<p><strong>Note:</strong> The following <code class="docutils literal notranslate"><span class="pre">batch</span></code> example builds on the results of the <code class="docutils literal notranslate"><span class="pre">`spatial_mod.crop_many_gdf</span></code> tutorial &lt;tutorial_spatial_mod.html#spatial_mod.crop_many_gdf&gt;`__ and and <code class="docutils literal notranslate"><span class="pre">`batch.segment_band_math</span></code> &lt;tutorial_batch.html#batch.segment_band_math&gt;`__. Please complete both the <code class="docutils literal notranslate"><span class="pre">spatial_mod.crop_many_gdf</span></code> and <code class="docutils literal notranslate"><span class="pre">batch.segment_band_math</span></code> tutorial examples to be sure your directories (i.e., <code class="docutils literal notranslate"><span class="pre">base_dir</span></code>, and <code class="docutils literal notranslate"><span class="pre">mask_dir</span></code>) are populated with image files. The following example will be using
datacubes located in: <code class="docutils literal notranslate"><span class="pre">F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf</span></code> based on MCARI2 images located in: <code class="docutils literal notranslate"><span class="pre">F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\band_math_mcari2-800-670-550</span></code></p>
<p>Load and initialize the <code class="docutils literal notranslate"><span class="pre">batch</span></code> module, ensuring <code class="docutils literal notranslate"><span class="pre">base_dir</span></code> is a valid directory</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">hs_process</span> <span class="kn">import</span> <span class="n">batch</span>

<span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">&#39;spatial_mod&#39;</span><span class="p">,</span> <span class="s1">&#39;crop_many_gdf&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">base_dir</span><span class="p">))</span>
<span class="n">hsbatch</span> <span class="o">=</span> <span class="n">batch</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">search_ext</span><span class="o">=</span><span class="s1">&#39;.bip&#39;</span><span class="p">)</span>  <span class="c1"># searches for all files in ``base_dir`` with a &quot;.bip&quot; file extension</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>There must be a single-band image that will be used to determine which datacube pixels are to be masked (determined via the <code class="docutils literal notranslate"><span class="pre">mask_dir</span></code> parameter). Point to the directory that contains the MCARI2 images.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">mask_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s1">&#39;band_math_mcari2-800-670-550&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">mask_dir</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>Indicate how the MCARI2 images should be used to determine which hyperspectal pixels are to be masked. The available parameters for controlling this are <code class="docutils literal notranslate"><span class="pre">mask_thresh</span></code>, <code class="docutils literal notranslate"><span class="pre">mask_percentile</span></code>, and <code class="docutils literal notranslate"><span class="pre">mask_side</span></code>. We will mask out all pixels that fall below the MCARI2 90th percentile.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">mask_percentile</span> <span class="o">=</span> <span class="mi">90</span>
<span class="n">mask_side</span> <span class="o">=</span> <span class="s1">&#39;lower&#39;</span>
</pre></div>
</div>
</div>
<p>Finally, indicate the folder to save the masked datacubes and perform the batch masking via <code class="docutils literal notranslate"><span class="pre">batch.segment_create_mask</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">folder_name</span> <span class="o">=</span> <span class="s1">&#39;mask_mcari2_90th&#39;</span>
<span class="n">hsbatch</span><span class="o">.</span><span class="n">segment_create_mask</span><span class="p">(</span><span class="n">base_dir</span><span class="o">=</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">mask_dir</span><span class="o">=</span><span class="n">mask_dir</span><span class="p">,</span>
                            <span class="n">folder_name</span><span class="o">=</span><span class="n">folder_name</span><span class="p">,</span>
                            <span class="n">name_append</span><span class="o">=</span><span class="s1">&#39;mask-mcari2-90th&#39;</span><span class="p">,</span> <span class="n">geotiff</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">mask_percentile</span><span class="o">=</span><span class="n">mask_percentile</span><span class="p">,</span>
                            <span class="n">mask_side</span><span class="o">=</span><span class="n">mask_side</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Processing 40 files. If this is not what is expected, please check if files have already undergone processing. If existing files should be overwritten, be sure to set the ``out_force`` parameter.

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1011-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1011-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\spectral\io\spyfile.py:252: NaNValueWarning: Image data contains NaN values.
  warnings.warn(&#39;Image data contains NaN values.&#39;, NaNValueWarning)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1012-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1012-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1013-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1013-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1014-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1014-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1015-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1015-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1016-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1016-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1017-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1017-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\spectral\io\spyfile.py:252: NaNValueWarning: Image data contains NaN values.
  warnings.warn(&#39;Image data contains NaN values.&#39;, NaNValueWarning)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1018-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_1018-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_611-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_611-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\spectral\io\spyfile.py:252: NaNValueWarning: Image data contains NaN values.
  warnings.warn(&#39;Image data contains NaN values.&#39;, NaNValueWarning)
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_612-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_612-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_613-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_613-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_614-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_614-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_615-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_615-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_616-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_616-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_617-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_617-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\spectral\io\spyfile.py:252: NaNValueWarning: Image data contains NaN values.
  warnings.warn(&#39;Image data contains NaN values.&#39;, NaNValueWarning)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_618-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_618-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_711-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_711-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\spectral\io\spyfile.py:252: NaNValueWarning: Image data contains NaN values.
  warnings.warn(&#39;Image data contains NaN values.&#39;, NaNValueWarning)
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_712-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_712-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_713-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_713-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_714-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_714-mask-mcari2-90th-spec-mean.spec
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_715-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_715-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_716-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_716-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_717-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_717-mask-mcari2-90th-spec-mean.spec

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\spectral\io\spyfile.py:252: NaNValueWarning: Image data contains NaN values.
  warnings.warn(&#39;Image data contains NaN values.&#39;, NaNValueWarning)
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\spectral\io\spyfile.py:252: NaNValueWarning: Image data contains NaN values.
  warnings.warn(&#39;Image data contains NaN values.&#39;, NaNValueWarning)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_718-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_718-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_811-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_811-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_812-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_812-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_813-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_813-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_814-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_814-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_815-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_815-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_816-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_816-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_817-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_817-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_818-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_818-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\spectral\io\spyfile.py:252: NaNValueWarning: Image data contains NaN values.
  warnings.warn(&#39;Image data contains NaN values.&#39;, NaNValueWarning)
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\spectral\io\spyfile.py:252: NaNValueWarning: Image data contains NaN values.
  warnings.warn(&#39;Image data contains NaN values.&#39;, NaNValueWarning)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_911-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_911-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_912-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_912-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_913-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_913-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_914-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_914-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_915-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_915-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_916-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_916-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_917-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_917-mask-mcari2-90th-spec-mean.spec


Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_918-mask-mcari2-90th.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\Wells_rep2_20180628_16h56m_pika_gige_7_plot_918-mask-mcari2-90th-spec-mean.spec


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_24_42.png" src="_images/tutorial_batch_24_42.png" />
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">batch.segment_create_mask</span></code> creates a new folder in <code class="docutils literal notranslate"><span class="pre">base_dir</span></code> named according to the <code class="docutils literal notranslate"><span class="pre">folder_name</span></code> parameter (in this case the new directory is <code class="docutils literal notranslate"><span class="pre">F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th</span></code>) which contains several data products.</p>
<p>The <strong>first</strong> is <code class="docutils literal notranslate"><span class="pre">mask-stats.csv</span></code>: a spreadsheet containing the band math threshold value for each image file. In this example, the MCARI2 value corresponding to the 90th percentile is listed.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s1">&#39;mask_mcari2_90th&#39;</span><span class="p">,</span> <span class="s1">&#39;mask-stats.csv&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fname</th>
      <th>plot_id</th>
      <th>lower-pctl-90</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1011</td>
      <td>0.832222</td>
    </tr>
    <tr>
      <th>1</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1012</td>
      <td>0.811119</td>
    </tr>
    <tr>
      <th>2</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1013</td>
      <td>0.743942</td>
    </tr>
    <tr>
      <th>3</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1014</td>
      <td>0.809496</td>
    </tr>
    <tr>
      <th>4</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1015</td>
      <td>0.813714</td>
    </tr>
    <tr>
      <th>5</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1016</td>
      <td>0.809670</td>
    </tr>
    <tr>
      <th>6</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1017</td>
      <td>0.807791</td>
    </tr>
    <tr>
      <th>7</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>1018</td>
      <td>0.777917</td>
    </tr>
    <tr>
      <th>8</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>611</td>
      <td>0.852368</td>
    </tr>
    <tr>
      <th>9</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>612</td>
      <td>0.839260</td>
    </tr>
    <tr>
      <th>10</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>613</td>
      <td>0.813595</td>
    </tr>
    <tr>
      <th>11</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>614</td>
      <td>0.824346</td>
    </tr>
    <tr>
      <th>12</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>615</td>
      <td>0.856374</td>
    </tr>
    <tr>
      <th>13</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>616</td>
      <td>0.849705</td>
    </tr>
    <tr>
      <th>14</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>617</td>
      <td>0.847811</td>
    </tr>
    <tr>
      <th>15</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>618</td>
      <td>0.744430</td>
    </tr>
    <tr>
      <th>16</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>711</td>
      <td>0.855418</td>
    </tr>
    <tr>
      <th>17</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>712</td>
      <td>0.810563</td>
    </tr>
    <tr>
      <th>18</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>713</td>
      <td>0.827544</td>
    </tr>
    <tr>
      <th>19</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>714</td>
      <td>0.840182</td>
    </tr>
    <tr>
      <th>20</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>715</td>
      <td>0.849235</td>
    </tr>
    <tr>
      <th>21</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>716</td>
      <td>0.850539</td>
    </tr>
    <tr>
      <th>22</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>717</td>
      <td>0.839124</td>
    </tr>
    <tr>
      <th>23</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>718</td>
      <td>0.839761</td>
    </tr>
    <tr>
      <th>24</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>811</td>
      <td>0.828950</td>
    </tr>
    <tr>
      <th>25</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>812</td>
      <td>0.832546</td>
    </tr>
    <tr>
      <th>26</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>813</td>
      <td>0.826736</td>
    </tr>
    <tr>
      <th>27</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>814</td>
      <td>0.800934</td>
    </tr>
    <tr>
      <th>28</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>815</td>
      <td>0.792807</td>
    </tr>
    <tr>
      <th>29</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>816</td>
      <td>0.792768</td>
    </tr>
    <tr>
      <th>30</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>817</td>
      <td>0.837843</td>
    </tr>
    <tr>
      <th>31</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>818</td>
      <td>0.755556</td>
    </tr>
    <tr>
      <th>32</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>911</td>
      <td>0.826041</td>
    </tr>
    <tr>
      <th>33</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>912</td>
      <td>0.803858</td>
    </tr>
    <tr>
      <th>34</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>913</td>
      <td>0.715721</td>
    </tr>
    <tr>
      <th>35</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>914</td>
      <td>0.835746</td>
    </tr>
    <tr>
      <th>36</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>915</td>
      <td>0.816475</td>
    </tr>
    <tr>
      <th>37</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>916</td>
      <td>0.818592</td>
    </tr>
    <tr>
      <th>38</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>917</td>
      <td>0.830873</td>
    </tr>
    <tr>
      <th>39</th>
      <td>F:\\nigo0024\Documents\hs_process_demo\spatial...</td>
      <td>918</td>
      <td>0.826988</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p><strong>Second</strong> is a <code class="docutils literal notranslate"><span class="pre">geotiff</span></code> file for each of the image cubes after the masking procedure. This can be opened in <em>QGIS</em> to visualize in a spatial reference system, or can be opened using any software that supports floating point <em>.tif</em> files. The masked pixels are saved as <code class="docutils literal notranslate"><span class="pre">null</span></code> values and should render transparently.</p>
<p><img alt="segment-create-mask-geotiff" src="_images/segment_create_mask_geotiff1.png" /></p>
<p><strong>Third</strong> is the full hyperspectral datacube, also with the masked pixels saved as <code class="docutils literal notranslate"><span class="pre">null</span></code> values. Note that the only pixels remaining are the 10% with the highest MCARI2 values.</p>
<p><img alt="segment-create-mask-datacube" src="_images/segment_create_mask_datacube1.png" /></p>
<p><strong>Fourth</strong> is the mean spectra across the unmasked datacube pixels. This is illustrated above by the green line plot (the light green shadow represents the standard deviation for each band).</p>
</div>
<hr class="docutils" />
<div class="section" id="batch.spatial_crop">
<h2><span class="section-number">7.6. </span><code class="docutils literal notranslate"><span class="pre">batch.spatial_crop</span></code><a class="headerlink" href="#batch.spatial_crop" title="Permalink to this headline">¶</a></h2>
<p>Iterates through a spreadsheet that provides necessary information about how each image should be cropped and how it should be saved. <a class="reference external" href="api/hs_process.batch.html#hs_process.batch.spatial_crop">[API]</a></p>
<p>If <code class="docutils literal notranslate"><span class="pre">gdf</span></code> is passed (a <code class="docutils literal notranslate"><span class="pre">geopandas.GoeDataFrame</span></code> polygon file), the cropped images will be shifted to the center of appropriate “plot” polygon.</p>
<p><strong>Tips and Tricks for</strong> <code class="docutils literal notranslate"><span class="pre">fname_sheet</span></code> <strong>when</strong> <code class="docutils literal notranslate"><span class="pre">gdf</span></code> <strong>is not passed</strong></p>
<p>If <code class="docutils literal notranslate"><span class="pre">gdf</span></code> is not passed, <code class="docutils literal notranslate"><span class="pre">fname_sheet</span></code> may have the following required column headings that correspond to the relevant parameters in <code class="docutils literal notranslate"><span class="pre">`spatial_mod.crop_single</span></code> &lt;tutorial_spatial_mod.html#spatial_mod.crop_single&gt;`__ and <code class="docutils literal notranslate"><span class="pre">`spatial_mod.crop_many_gdf</span></code> &lt;tutorial_spatial_mod.html#spatial_mod.crop_many_gdf&gt;`__:</p>
<ol class="arabic simple">
<li><p>“directory”</p></li>
<li><p>“name_short”</p></li>
<li><p>“name_long”</p></li>
<li><p>“ext”</p></li>
<li><p>“pix_e_ul”</p></li>
<li><p>“pix_n_ul”.</p></li>
</ol>
<p>With this minimum input, <code class="docutils literal notranslate"><span class="pre">batch.spatial_crop</span></code> will read in each image, crop from the upper left pixel (determined as <code class="docutils literal notranslate"><span class="pre">pix_e_ul</span></code>/<code class="docutils literal notranslate"><span class="pre">pix_n_ul</span></code>) to the lower right pixel calculated based on <code class="docutils literal notranslate"><span class="pre">crop_e_pix</span></code>/<code class="docutils literal notranslate"><span class="pre">crop_n_pix</span></code> (which is the width of the cropped area in units of pixels).</p>
<p><strong>Note:</strong> <code class="docutils literal notranslate"><span class="pre">crop_e_pix</span></code> and <code class="docutils literal notranslate"><span class="pre">crop_n_pix</span></code> have default values (see <code class="docutils literal notranslate"><span class="pre">`defaults.crop_defaults</span></code> &lt;api/hs_process.defaults.html#hs_process.defaults&gt;`__), but they can also be passed specifically for each datacube by including appropriate columns in <code class="docutils literal notranslate"><span class="pre">fname_sheet</span></code> (which takes precedence over <code class="docutils literal notranslate"><span class="pre">defaults.crop_defaults</span></code>).</p>
<p><code class="docutils literal notranslate"><span class="pre">fname_sheet</span></code> may also have the following optional column headings:</p>
<ol class="arabic simple">
<li><p>“crop_e_pix”</p></li>
<li><p>“crop_n_pix”</p></li>
<li><p>“crop_e_m”</p></li>
<li><p>“crop_n_m”</p></li>
<li><p>“buf_e_pix”</p></li>
<li><p>“buf_n_pix”</p></li>
<li><p>“buf_e_m”</p></li>
<li><p>“buf_n_m”</p></li>
<li><p>“plot_id”</p></li>
</ol>
<p><strong>More</strong> <code class="docutils literal notranslate"><span class="pre">fname_sheet</span></code> <strong>Tips and Tricks</strong></p>
<ol class="arabic simple">
<li><p>These optional inputs passed via <code class="docutils literal notranslate"><span class="pre">fname_sheet</span></code> allow more control over exactly how the images are to be cropped. For a more detailed explanation of the information that many of these columns are intended to contain, see the documentation for <code class="docutils literal notranslate"><span class="pre">`spatial_mod.crop_single</span></code> &lt;tutorial_spatial_mod.html#spatial_mod.crop_single&gt;`__ and <code class="docutils literal notranslate"><span class="pre">`spatial_mod.crop_many_gdf</span></code> &lt;tutorial_spatial_mod.html#spatial_mod.crop_many_gdf&gt;`__. Those parameters not referenced should be apparent in the API examples and
tutorials.</p></li>
<li><p>If the column names are different in <code class="docutils literal notranslate"><span class="pre">fname_sheet</span></code> than described here, <code class="docutils literal notranslate"><span class="pre">`defaults.spat_crop_cols</span></code> &lt;api/hs_process.defaults.html#hs_process.defaults&gt;`__ can be modified to indicate which columns correspond to the relevant information.</p></li>
<li><p>Any other columns can be added to <code class="docutils literal notranslate"><span class="pre">fname_sheet</span></code>, but <code class="docutils literal notranslate"><span class="pre">batch.spatial_crop</span></code> does not use them in any way.</p></li>
</ol>
<p><strong>Note:</strong> The following <code class="docutils literal notranslate"><span class="pre">batch</span></code> example only actually processes <em>a single</em> hyperspectral image. If more datacubes were present in <code class="docutils literal notranslate"><span class="pre">base_dir</span></code>, however, <code class="docutils literal notranslate"><span class="pre">batch.spatial_crop</span></code> would process all datacubes that were available.</p>
<p><strong>Note:</strong> This example uses <code class="docutils literal notranslate"><span class="pre">spatial_mod.crop_many_gdf</span></code> to crop many plots from a datacube using a polygon geometry file describing the spatial extent of each plot.</p>
<p>Load and initialize the <code class="docutils literal notranslate"><span class="pre">batch</span></code> module, checking to be sure the directory exists.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">hs_process</span> <span class="kn">import</span> <span class="n">batch</span>

<span class="n">base_dir</span> <span class="o">=</span> <span class="n">data_dir</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">base_dir</span><span class="p">))</span>
<span class="n">hsbatch</span> <span class="o">=</span> <span class="n">batch</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">search_ext</span><span class="o">=</span><span class="s1">&#39;.bip&#39;</span><span class="p">,</span> <span class="n">dir_level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># searches for all files in ``base_dir`` with a &quot;.bip&quot; file extension</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>Load the plot geometry as a <code class="docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fname_gdf</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">&#39;plot_bounds.geojson&#39;</span><span class="p">)</span>

<span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">fname_gdf</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Perform the spatial cropping using the <em>“many_gdf”</em> <code class="docutils literal notranslate"><span class="pre">method</span></code>. Note that nothing is being bassed to <code class="docutils literal notranslate"><span class="pre">fname_sheet</span></code> here, so <code class="docutils literal notranslate"><span class="pre">batch.spatial_crop</span></code> is simply going to attempt to crop all plots contained within <code class="docutils literal notranslate"><span class="pre">gdf</span></code> that overlap with any datacubes in <code class="docutils literal notranslate"><span class="pre">base_dir</span></code>. This option does not allow for any flexibility regarding minor adjustments to the cropping procedure (e.g., offset to the plot location in the datacube relative to the location in the <code class="docutils literal notranslate"><span class="pre">gdf</span></code>), but it is the most straightforward way
to run <code class="docutils literal notranslate"><span class="pre">batch.spatial_crop</span></code> because it does not depend on anything to be passed to <code class="docutils literal notranslate"><span class="pre">fname_sheet</span></code>. It does, however, allow you to adjust the plot buffer relative to <code class="docutils literal notranslate"><span class="pre">gdf</span></code> via <code class="docutils literal notranslate"><span class="pre">hsbatch.io.defaults.crop_defaults</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">defaults</span><span class="o">.</span><span class="n">crop_defaults</span><span class="o">.</span><span class="n">buf_e_m</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">defaults</span><span class="o">.</span><span class="n">crop_defaults</span><span class="o">.</span><span class="n">buf_n_m</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">set_io_defaults</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">hsbatch</span><span class="o">.</span><span class="n">spatial_crop</span><span class="p">(</span><span class="n">base_dir</span><span class="o">=</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;many_gdf&#39;</span><span class="p">,</span> <span class="n">gdf</span><span class="o">=</span><span class="n">gdf</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1018-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_918-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_818-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_718-spatial-crop.bip


</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_618-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1017-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_917-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_817-spatial-crop.bip
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_717-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_617-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1016-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_916-spatial-crop.bip
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_816-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_716-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_616-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1015-spatial-crop.bip
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_915-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_815-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_715-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_615-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1014-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_914-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_814-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_714-spatial-crop.bip
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_614-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1013-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_913-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_813-spatial-crop.bip
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_713-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_613-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1012-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_912-spatial-crop.bip
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_812-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_712-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_612-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1011-spatial-crop.bip
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_911-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_811-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_711-spatial-crop.bip



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_611-spatial-crop.bip
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\nigo0024\AppData\Local\Continuum\anaconda3\envs\spec\lib\site-packages\hs_process\utilities.py:1041: MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.
  ax = plt.subplot()
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>



Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
The size of ``spyfile`` is zero; thus there is nothing to write to file and ``write_cube()`` is being aborted.
Filename: Wells_rep2_20180628_16h56m_pika_gige_7_1010-spatial-crop.bip.hdr

The size of ``spyfile`` is zero; thus there is nothing to write to file and ``write_tif()`` is being aborted.
Filename: Wells_rep2_20180628_16h56m_pika_gige_7_1010-spatial-crop.tif


Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
The size of ``spyfile`` is zero; thus there is nothing to write to file and ``write_cube()`` is being aborted.
Filename: Wells_rep2_20180628_16h56m_pika_gige_7_910-spatial-crop.bip.hdr

The size of ``spyfile`` is zero; thus there is nothing to write to file and ``write_tif()`` is being aborted.
Filename: Wells_rep2_20180628_16h56m_pika_gige_7_910-spatial-crop.tif


Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
The size of ``spyfile`` is zero; thus there is nothing to write to file and ``write_cube()`` is being aborted.
Filename: Wells_rep2_20180628_16h56m_pika_gige_7_810-spatial-crop.bip.hdr

The size of ``spyfile`` is zero; thus there is nothing to write to file and ``write_tif()`` is being aborted.
Filename: Wells_rep2_20180628_16h56m_pika_gige_7_810-spatial-crop.tif


Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
The size of ``spyfile`` is zero; thus there is nothing to write to file and ``write_cube()`` is being aborted.
Filename: Wells_rep2_20180628_16h56m_pika_gige_7_710-spatial-crop.bip.hdr

The size of ``spyfile`` is zero; thus there is nothing to write to file and ``write_tif()`` is being aborted.
Filename: Wells_rep2_20180628_16h56m_pika_gige_7_710-spatial-crop.tif


Spatially cropping: F:\\nigo0024\Documents\hs_process_demo\Wells_rep2_20180628_16h56m_pika_gige_7-Radiance Conversion-Georectify Airborne Datacube-Convert Radiance Cube to Reflectance from Measured Reference Spectrum.bip
The size of ``spyfile`` is zero; thus there is nothing to write to file and ``write_cube()`` is being aborted.
Filename: Wells_rep2_20180628_16h56m_pika_gige_7_610-spatial-crop.bip.hdr

The size of ``spyfile`` is zero; thus there is nothing to write to file and ``write_tif()`` is being aborted.
Filename: Wells_rep2_20180628_16h56m_pika_gige_7_610-spatial-crop.tif

</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_33_19.png" src="_images/tutorial_batch_33_19.png" />
</div>
</div>
<p>A new folder was created in <code class="docutils literal notranslate"><span class="pre">base_dir</span></code> - <code class="docutils literal notranslate"><span class="pre">F:\\nigo0024\Documents\hs_process_demo\spatial_crop</span></code> - that contains the cropped datacubes and the cropped <code class="docutils literal notranslate"><span class="pre">geotiff</span></code> images. The Plot ID from the <code class="docutils literal notranslate"><span class="pre">gdf</span></code> is used to name each datacube according to its plot ID. The <code class="docutils literal notranslate"><span class="pre">geotiff</span></code> images can be opened in <em>QGIS</em> to visualize the images after cropping them.</p>
<p><img alt="spatial-crop-tifs" src="_images/spatial_crop_tifs1.png" /></p>
<p>The cropped images were brightened in <em>QGIS</em> to emphasize the cropped boundaries. The plot boundaries are overlaid for reference (notice the 2.0 m buffer on the East/West ends and the 0.5 m buffer on the North/South sides).</p>
</div>
<hr class="docutils" />
<div class="section" id="batch.spectra_combine">
<h2><span class="section-number">7.7. </span><code class="docutils literal notranslate"><span class="pre">batch.spectra_combine</span></code><a class="headerlink" href="#batch.spectra_combine" title="Permalink to this headline">¶</a></h2>
<p>Batch processing tool to gather all pixels from every image in a directory, compute the mean and standard deviation, and save as a single spectra (i.e., a spectra file is equivalent to a single spectral pixel with no spatial information). <a class="reference external" href="api/hs_process.batch.html#hs_process.batch.spectra_combine">[API]</a></p>
<p>Visualize the individual spectra by opening in <em>Spectronon</em>.</p>
<p><img alt="spectra-combine-initial" src="_images/spectra_combine_initial.png" /></p>
<p>Notice that there is a range in radiance values across the various reference panels (e.g., the radiance in the green region ranges from ~26k to ~28k μW sr-1 cm-2 μm-1).</p>
<p><strong>Note:</strong> The following example will load in several small hyperspectral radiance datacubes <em>(not reflectance)</em> that were previously cropped manually (via Spectronon software). These datacubes represent the radiance values of grey reference panels that were placed in the field to provide data necessary for converting radiance imagery to reflectance. These particular datacubes were extracted from several different images captured within ~10 minutes of each other.</p>
<p>Load and initialize the <code class="docutils literal notranslate"><span class="pre">batch</span></code> module, checking to be sure the directory exists.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">hs_process</span> <span class="kn">import</span> <span class="n">batch</span>

<span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">&#39;cube_ref_panels&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">base_dir</span><span class="p">))</span>
<span class="n">hsbatch</span> <span class="o">=</span> <span class="n">batch</span><span class="p">(</span><span class="n">base_dir</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>Combine all the <em>radiance</em> datacubes in the directory via <code class="docutils literal notranslate"><span class="pre">batch.spectra_combine</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">hsbatch</span><span class="o">.</span><span class="n">spectra_combine</span><span class="p">(</span><span class="n">base_dir</span><span class="o">=</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">search_ext</span><span class="o">=</span><span class="s1">&#39;bip&#39;</span><span class="p">,</span> <span class="n">dir_level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">out_force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Combining datacubes/spectra into a single mean spectra.
Number of input datacubes/spectra: 7
Total number of pixels: 1516
Saving F:\nigo0024\Documents\hs_process_demo\cube_ref_panels\spec_mean_spy.spec
</pre></div></div>
</div>
<p>Visualize the combined spectra by opening in <em>Spectronon</em>. The solid line represents the mean radiance spectra across all pixels and images in <code class="docutils literal notranslate"><span class="pre">base_dir</span></code>, and the lighter, slightly transparent line represents the standard deviation of the radiance across all pixels and images in <code class="docutils literal notranslate"><span class="pre">base_dir</span></code>.</p>
<p><img alt="spectra-combine" src="_images/spectra_combine1.png" /></p>
<p>Notice the lower signal at the oxygen absorption region (near 770 nm). After converting datacubes to reflectance, it may be desireable to spectrally clip this region (see <code class="docutils literal notranslate"><span class="pre">`spec_mod.spectral_clip</span></code> &lt;tutorial_spec_mod.html#spec_mod.spectral_clip&gt;`__)</p>
</div>
<hr class="docutils" />
<div class="section" id="batch.spectra_to_csv">
<h2><span class="section-number">7.8. </span><code class="docutils literal notranslate"><span class="pre">batch.spectra_to_csv</span></code><a class="headerlink" href="#batch.spectra_to_csv" title="Permalink to this headline">¶</a></h2>
<p>Reads all the <code class="docutils literal notranslate"><span class="pre">.spec</span></code> files in a direcory and saves their reflectance information to a <code class="docutils literal notranslate"><span class="pre">.csv</span></code>. <code class="docutils literal notranslate"><span class="pre">batch.spectra_to_csv</span></code> is identical to <code class="docutils literal notranslate"><span class="pre">batch.spectra_to_df</span></code> except a <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file is saved rather than returning a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>. <a class="reference external" href="api/hs_process.batch.html#hs_process.batch.spectra_to_csv">[API]</a></p>
<p><strong>Note:</strong> The following example builds on the results of the <code class="docutils literal notranslate"><span class="pre">`batch.segment_band_math</span></code> tutorial &lt;tutorial_batch.html#batch.segment_band_math&gt;`__ and <code class="docutils literal notranslate"><span class="pre">`batch.segment_create_mask</span></code> &lt;tutorial_batch.html#batch.segment_create_mask&gt;`__. Please complete each of those tutorial examples to be sure your directory (i.e., <code class="docutils literal notranslate"><span class="pre">F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th</span></code>) is populated with image files.</p>
<p>Load and initialize the <code class="docutils literal notranslate"><span class="pre">batch</span></code> module, checking to be sure the directory exists.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">hs_process</span> <span class="kn">import</span> <span class="n">batch</span>

<span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">&#39;spatial_mod&#39;</span><span class="p">,</span> <span class="s1">&#39;crop_many_gdf&#39;</span><span class="p">,</span> <span class="s1">&#39;mask_mcari2_90th&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">base_dir</span><span class="p">))</span>
<span class="n">hsbatch</span> <span class="o">=</span> <span class="n">batch</span><span class="p">(</span><span class="n">base_dir</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>Read all the <code class="docutils literal notranslate"><span class="pre">.spec</span></code> files in <code class="docutils literal notranslate"><span class="pre">base_dir</span></code> and save them to a <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">hsbatch</span><span class="o">.</span><span class="n">spectra_to_csv</span><span class="p">(</span><span class="n">base_dir</span><span class="o">=</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">search_ext</span><span class="o">=</span><span class="s1">&#39;spec&#39;</span><span class="p">,</span> <span class="n">dir_level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Writing mean spectra to a .csv file.
Number of input datacubes/spectra: 40
Output file location: F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th\stats-spectra.csv
</pre></div></div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">stats-spectra.csv</span></code> is opened, we can see that each row is a <code class="docutils literal notranslate"><span class="pre">.spec</span></code> file from a different plot, and each column is a particular spectral band/wavelength.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s1">&#39;stats-spectra.csv&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>wavelength</th>
      <th>394.6</th>
      <th>396.6528</th>
      <th>398.7056</th>
      <th>400.7584</th>
      <th>402.8112</th>
      <th>404.864</th>
      <th>406.9168</th>
      <th>408.9696</th>
      <th>...</th>
      <th>866.744</th>
      <th>868.7968</th>
      <th>870.8496</th>
      <th>872.9024</th>
      <th>874.9552</th>
      <th>877.008</th>
      <th>879.0608</th>
      <th>881.1136</th>
      <th>883.1664</th>
      <th>885.2192</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>fname</td>
      <td>plot_id</td>
      <td>1.000000</td>
      <td>2.000000</td>
      <td>3.000000</td>
      <td>4.000000</td>
      <td>5.000000</td>
      <td>6.000000</td>
      <td>7.000000</td>
      <td>8.000000</td>
      <td>...</td>
      <td>231.000000</td>
      <td>232.000000</td>
      <td>233.000000</td>
      <td>234.000000</td>
      <td>235.000000</td>
      <td>236.000000</td>
      <td>237.000000</td>
      <td>238.000000</td>
      <td>239.000000</td>
      <td>240.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1011</td>
      <td>6.422696</td>
      <td>11.165407</td>
      <td>5.400625</td>
      <td>4.512296</td>
      <td>3.475373</td>
      <td>2.522064</td>
      <td>2.044144</td>
      <td>1.697843</td>
      <td>...</td>
      <td>45.952736</td>
      <td>45.177956</td>
      <td>44.178223</td>
      <td>45.595730</td>
      <td>44.237053</td>
      <td>45.192883</td>
      <td>44.707069</td>
      <td>44.317673</td>
      <td>44.977257</td>
      <td>44.885410</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1012</td>
      <td>8.112519</td>
      <td>10.618262</td>
      <td>5.917343</td>
      <td>4.360370</td>
      <td>3.632289</td>
      <td>3.072112</td>
      <td>2.277318</td>
      <td>1.906745</td>
      <td>...</td>
      <td>44.907276</td>
      <td>44.544106</td>
      <td>43.384926</td>
      <td>44.675610</td>
      <td>43.880154</td>
      <td>44.394325</td>
      <td>43.728794</td>
      <td>43.444515</td>
      <td>44.277538</td>
      <td>44.192337</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1013</td>
      <td>7.546187</td>
      <td>11.487464</td>
      <td>6.051892</td>
      <td>4.632227</td>
      <td>3.686217</td>
      <td>2.832436</td>
      <td>2.235654</td>
      <td>1.991209</td>
      <td>...</td>
      <td>40.590130</td>
      <td>40.234657</td>
      <td>39.194435</td>
      <td>40.260246</td>
      <td>39.648201</td>
      <td>40.096077</td>
      <td>39.318855</td>
      <td>39.217598</td>
      <td>39.904327</td>
      <td>39.873375</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1014</td>
      <td>7.918447</td>
      <td>11.799173</td>
      <td>6.479166</td>
      <td>4.771261</td>
      <td>3.451924</td>
      <td>2.763257</td>
      <td>2.347495</td>
      <td>1.948497</td>
      <td>...</td>
      <td>46.262978</td>
      <td>45.802395</td>
      <td>44.400795</td>
      <td>45.824875</td>
      <td>45.436096</td>
      <td>45.664883</td>
      <td>44.691391</td>
      <td>44.591335</td>
      <td>45.321087</td>
      <td>45.260036</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1015</td>
      <td>8.051130</td>
      <td>12.631905</td>
      <td>6.097687</td>
      <td>4.523533</td>
      <td>3.659562</td>
      <td>3.061043</td>
      <td>2.291068</td>
      <td>2.011611</td>
      <td>...</td>
      <td>46.753952</td>
      <td>46.385578</td>
      <td>44.936142</td>
      <td>46.200020</td>
      <td>45.938831</td>
      <td>46.119297</td>
      <td>45.290573</td>
      <td>45.130165</td>
      <td>45.812798</td>
      <td>45.785793</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1016</td>
      <td>8.193905</td>
      <td>12.427509</td>
      <td>6.110229</td>
      <td>4.745999</td>
      <td>3.591855</td>
      <td>2.923646</td>
      <td>2.446748</td>
      <td>1.976440</td>
      <td>...</td>
      <td>45.650295</td>
      <td>45.279652</td>
      <td>43.989613</td>
      <td>45.044235</td>
      <td>44.638329</td>
      <td>45.159748</td>
      <td>44.195812</td>
      <td>44.206612</td>
      <td>44.825630</td>
      <td>44.806541</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1017</td>
      <td>7.731573</td>
      <td>11.072787</td>
      <td>6.414916</td>
      <td>4.379418</td>
      <td>3.568001</td>
      <td>3.087936</td>
      <td>2.706290</td>
      <td>2.253996</td>
      <td>...</td>
      <td>45.070175</td>
      <td>44.707264</td>
      <td>43.649368</td>
      <td>44.803082</td>
      <td>44.225674</td>
      <td>44.722172</td>
      <td>43.806782</td>
      <td>43.737411</td>
      <td>44.391449</td>
      <td>44.494034</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1018</td>
      <td>9.187103</td>
      <td>12.664470</td>
      <td>7.222271</td>
      <td>5.166668</td>
      <td>3.755876</td>
      <td>3.502435</td>
      <td>2.585752</td>
      <td>2.439782</td>
      <td>...</td>
      <td>43.974651</td>
      <td>43.589466</td>
      <td>42.655235</td>
      <td>43.862473</td>
      <td>42.618870</td>
      <td>43.594215</td>
      <td>42.709656</td>
      <td>42.671970</td>
      <td>43.441093</td>
      <td>43.256435</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>611</td>
      <td>7.894733</td>
      <td>12.925845</td>
      <td>6.147056</td>
      <td>4.658052</td>
      <td>3.637797</td>
      <td>2.892701</td>
      <td>2.176254</td>
      <td>1.929648</td>
      <td>...</td>
      <td>48.910378</td>
      <td>48.432854</td>
      <td>47.286629</td>
      <td>48.732929</td>
      <td>47.200031</td>
      <td>48.484467</td>
      <td>47.580902</td>
      <td>47.318703</td>
      <td>48.056881</td>
      <td>47.892609</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>612</td>
      <td>8.052910</td>
      <td>12.121128</td>
      <td>6.476834</td>
      <td>4.594028</td>
      <td>3.963124</td>
      <td>3.352512</td>
      <td>2.584712</td>
      <td>2.176424</td>
      <td>...</td>
      <td>49.243702</td>
      <td>48.784691</td>
      <td>47.616558</td>
      <td>48.979633</td>
      <td>48.166191</td>
      <td>48.791489</td>
      <td>47.949718</td>
      <td>47.854076</td>
      <td>48.677956</td>
      <td>48.559052</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>613</td>
      <td>7.101891</td>
      <td>13.869357</td>
      <td>6.037887</td>
      <td>4.746872</td>
      <td>4.050615</td>
      <td>3.069094</td>
      <td>2.371190</td>
      <td>2.110826</td>
      <td>...</td>
      <td>46.847263</td>
      <td>46.357956</td>
      <td>45.119789</td>
      <td>46.259048</td>
      <td>45.815186</td>
      <td>46.091328</td>
      <td>45.331429</td>
      <td>45.250095</td>
      <td>45.902679</td>
      <td>45.867226</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>614</td>
      <td>7.767455</td>
      <td>11.517489</td>
      <td>6.504547</td>
      <td>5.002610</td>
      <td>4.108159</td>
      <td>3.150337</td>
      <td>2.335922</td>
      <td>2.077424</td>
      <td>...</td>
      <td>48.436760</td>
      <td>48.011398</td>
      <td>46.613682</td>
      <td>48.012177</td>
      <td>47.631981</td>
      <td>47.782158</td>
      <td>46.921013</td>
      <td>46.775673</td>
      <td>47.526283</td>
      <td>47.689594</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>615</td>
      <td>8.338742</td>
      <td>12.195340</td>
      <td>6.451599</td>
      <td>4.240588</td>
      <td>3.776052</td>
      <td>3.113763</td>
      <td>2.356512</td>
      <td>2.021913</td>
      <td>...</td>
      <td>50.734745</td>
      <td>50.287186</td>
      <td>48.781429</td>
      <td>50.275272</td>
      <td>49.895214</td>
      <td>50.099014</td>
      <td>49.201550</td>
      <td>49.157391</td>
      <td>49.928482</td>
      <td>49.944981</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>616</td>
      <td>8.462449</td>
      <td>12.228027</td>
      <td>6.221152</td>
      <td>5.020068</td>
      <td>3.859836</td>
      <td>2.963626</td>
      <td>2.616114</td>
      <td>2.148959</td>
      <td>...</td>
      <td>50.882053</td>
      <td>50.610901</td>
      <td>49.143269</td>
      <td>50.353683</td>
      <td>50.076084</td>
      <td>50.424557</td>
      <td>49.586929</td>
      <td>49.364635</td>
      <td>50.327682</td>
      <td>50.158352</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>617</td>
      <td>7.836879</td>
      <td>12.302659</td>
      <td>6.516508</td>
      <td>5.028650</td>
      <td>3.786623</td>
      <td>3.158106</td>
      <td>2.512555</td>
      <td>2.211797</td>
      <td>...</td>
      <td>50.542599</td>
      <td>49.898525</td>
      <td>48.739388</td>
      <td>50.094898</td>
      <td>49.135872</td>
      <td>49.818291</td>
      <td>49.213223</td>
      <td>48.849125</td>
      <td>49.606403</td>
      <td>49.541588</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>618</td>
      <td>7.699069</td>
      <td>12.479805</td>
      <td>7.513241</td>
      <td>5.080193</td>
      <td>3.766904</td>
      <td>4.039999</td>
      <td>2.889983</td>
      <td>2.481177</td>
      <td>...</td>
      <td>43.423470</td>
      <td>43.023785</td>
      <td>42.083881</td>
      <td>43.321228</td>
      <td>42.022205</td>
      <td>43.036125</td>
      <td>42.286880</td>
      <td>42.169292</td>
      <td>42.878952</td>
      <td>42.629581</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>711</td>
      <td>7.413501</td>
      <td>11.979908</td>
      <td>6.331764</td>
      <td>4.616187</td>
      <td>3.741205</td>
      <td>2.953020</td>
      <td>2.130414</td>
      <td>1.865968</td>
      <td>...</td>
      <td>48.960533</td>
      <td>48.333519</td>
      <td>47.319622</td>
      <td>48.817574</td>
      <td>47.147610</td>
      <td>48.457798</td>
      <td>47.601730</td>
      <td>47.443398</td>
      <td>48.177635</td>
      <td>48.079128</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>712</td>
      <td>8.563736</td>
      <td>12.756330</td>
      <td>6.512790</td>
      <td>4.603833</td>
      <td>4.078624</td>
      <td>3.001086</td>
      <td>2.345825</td>
      <td>2.182991</td>
      <td>...</td>
      <td>45.364338</td>
      <td>44.942127</td>
      <td>43.734760</td>
      <td>44.859043</td>
      <td>44.096611</td>
      <td>44.891098</td>
      <td>43.987461</td>
      <td>43.934639</td>
      <td>44.584408</td>
      <td>44.516068</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>713</td>
      <td>7.193272</td>
      <td>12.432698</td>
      <td>6.341044</td>
      <td>4.751496</td>
      <td>3.884561</td>
      <td>3.225402</td>
      <td>2.386267</td>
      <td>1.978704</td>
      <td>...</td>
      <td>47.191071</td>
      <td>46.948906</td>
      <td>45.465096</td>
      <td>46.803604</td>
      <td>46.162277</td>
      <td>46.604122</td>
      <td>45.723297</td>
      <td>45.659050</td>
      <td>46.285809</td>
      <td>46.223267</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>714</td>
      <td>7.506849</td>
      <td>12.163078</td>
      <td>6.235592</td>
      <td>5.051850</td>
      <td>3.565286</td>
      <td>3.103295</td>
      <td>2.514792</td>
      <td>2.101607</td>
      <td>...</td>
      <td>50.147270</td>
      <td>49.754768</td>
      <td>48.239792</td>
      <td>49.542763</td>
      <td>49.063854</td>
      <td>49.437073</td>
      <td>48.558815</td>
      <td>48.262203</td>
      <td>49.123722</td>
      <td>49.125538</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>715</td>
      <td>7.843419</td>
      <td>11.334277</td>
      <td>6.070998</td>
      <td>4.755501</td>
      <td>3.612546</td>
      <td>2.946136</td>
      <td>2.481973</td>
      <td>2.127480</td>
      <td>...</td>
      <td>50.221123</td>
      <td>49.917950</td>
      <td>48.327522</td>
      <td>49.861164</td>
      <td>49.485455</td>
      <td>49.758858</td>
      <td>48.701935</td>
      <td>48.561798</td>
      <td>49.448074</td>
      <td>49.339077</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>716</td>
      <td>8.595501</td>
      <td>12.686199</td>
      <td>6.714646</td>
      <td>5.089789</td>
      <td>4.046583</td>
      <td>3.353686</td>
      <td>2.646060</td>
      <td>2.288584</td>
      <td>...</td>
      <td>51.727932</td>
      <td>51.372154</td>
      <td>49.958393</td>
      <td>51.196743</td>
      <td>50.829052</td>
      <td>51.205315</td>
      <td>50.234829</td>
      <td>50.052689</td>
      <td>51.005817</td>
      <td>51.010590</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>717</td>
      <td>8.393307</td>
      <td>13.584164</td>
      <td>7.553740</td>
      <td>5.226162</td>
      <td>3.891386</td>
      <td>3.332365</td>
      <td>2.603128</td>
      <td>2.308126</td>
      <td>...</td>
      <td>49.470417</td>
      <td>49.000923</td>
      <td>47.869789</td>
      <td>49.044590</td>
      <td>48.184570</td>
      <td>48.950596</td>
      <td>47.984806</td>
      <td>47.949333</td>
      <td>48.544048</td>
      <td>48.653152</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>718</td>
      <td>8.843493</td>
      <td>12.679571</td>
      <td>7.023562</td>
      <td>5.442327</td>
      <td>3.547979</td>
      <td>3.654238</td>
      <td>2.801330</td>
      <td>2.408600</td>
      <td>...</td>
      <td>49.965923</td>
      <td>49.596848</td>
      <td>48.566929</td>
      <td>49.934406</td>
      <td>48.459545</td>
      <td>49.734013</td>
      <td>48.911800</td>
      <td>48.704708</td>
      <td>49.373581</td>
      <td>49.234245</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>811</td>
      <td>7.083653</td>
      <td>12.006280</td>
      <td>6.046984</td>
      <td>4.687656</td>
      <td>3.714422</td>
      <td>3.112501</td>
      <td>2.201406</td>
      <td>1.955266</td>
      <td>...</td>
      <td>45.894547</td>
      <td>45.683109</td>
      <td>44.512463</td>
      <td>45.909119</td>
      <td>44.418194</td>
      <td>45.559864</td>
      <td>44.653900</td>
      <td>44.596027</td>
      <td>45.253811</td>
      <td>45.233994</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>812</td>
      <td>8.100746</td>
      <td>11.882498</td>
      <td>6.556836</td>
      <td>5.156692</td>
      <td>3.808788</td>
      <td>3.205003</td>
      <td>2.256833</td>
      <td>1.985809</td>
      <td>...</td>
      <td>47.641499</td>
      <td>47.320831</td>
      <td>46.146374</td>
      <td>47.431927</td>
      <td>46.529518</td>
      <td>47.210178</td>
      <td>46.263016</td>
      <td>46.228031</td>
      <td>47.041344</td>
      <td>46.920643</td>
    </tr>
    <tr>
      <th>27</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>813</td>
      <td>7.392107</td>
      <td>11.692697</td>
      <td>6.868009</td>
      <td>4.766898</td>
      <td>3.300512</td>
      <td>3.251760</td>
      <td>2.483874</td>
      <td>1.982789</td>
      <td>...</td>
      <td>48.353649</td>
      <td>47.845009</td>
      <td>46.524998</td>
      <td>47.933548</td>
      <td>47.388008</td>
      <td>47.743717</td>
      <td>46.758194</td>
      <td>46.675159</td>
      <td>47.434868</td>
      <td>47.407082</td>
    </tr>
    <tr>
      <th>28</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>814</td>
      <td>8.676796</td>
      <td>12.797872</td>
      <td>6.245512</td>
      <td>5.114694</td>
      <td>4.033754</td>
      <td>3.256408</td>
      <td>2.559943</td>
      <td>2.309992</td>
      <td>...</td>
      <td>47.045605</td>
      <td>46.719845</td>
      <td>45.381981</td>
      <td>46.669727</td>
      <td>46.393925</td>
      <td>46.522648</td>
      <td>45.601192</td>
      <td>45.478077</td>
      <td>46.220753</td>
      <td>46.200783</td>
    </tr>
    <tr>
      <th>29</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>815</td>
      <td>8.454503</td>
      <td>11.652295</td>
      <td>6.748854</td>
      <td>4.714633</td>
      <td>3.751000</td>
      <td>3.298980</td>
      <td>2.519693</td>
      <td>2.213987</td>
      <td>...</td>
      <td>44.587364</td>
      <td>44.260040</td>
      <td>42.810707</td>
      <td>44.226532</td>
      <td>43.810524</td>
      <td>43.945774</td>
      <td>43.191242</td>
      <td>42.986115</td>
      <td>43.673561</td>
      <td>43.686180</td>
    </tr>
    <tr>
      <th>30</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>816</td>
      <td>8.175219</td>
      <td>13.649111</td>
      <td>7.179554</td>
      <td>5.547868</td>
      <td>3.977848</td>
      <td>3.313987</td>
      <td>2.767278</td>
      <td>2.332556</td>
      <td>...</td>
      <td>45.729687</td>
      <td>45.239017</td>
      <td>44.123909</td>
      <td>45.202801</td>
      <td>44.771603</td>
      <td>45.066429</td>
      <td>44.421761</td>
      <td>44.196083</td>
      <td>45.021992</td>
      <td>45.006042</td>
    </tr>
    <tr>
      <th>31</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>817</td>
      <td>8.296126</td>
      <td>13.092884</td>
      <td>7.353922</td>
      <td>5.555367</td>
      <td>4.299960</td>
      <td>3.954008</td>
      <td>2.897280</td>
      <td>2.612855</td>
      <td>...</td>
      <td>50.166386</td>
      <td>49.834427</td>
      <td>48.704960</td>
      <td>49.829338</td>
      <td>49.234818</td>
      <td>49.822399</td>
      <td>48.999508</td>
      <td>48.709965</td>
      <td>49.634937</td>
      <td>49.476097</td>
    </tr>
    <tr>
      <th>32</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>818</td>
      <td>8.924273</td>
      <td>14.522986</td>
      <td>8.038774</td>
      <td>5.096577</td>
      <td>4.669975</td>
      <td>4.417596</td>
      <td>3.166564</td>
      <td>2.866211</td>
      <td>...</td>
      <td>42.627266</td>
      <td>42.324959</td>
      <td>41.408493</td>
      <td>42.656376</td>
      <td>41.297897</td>
      <td>42.299149</td>
      <td>41.525536</td>
      <td>41.309063</td>
      <td>41.896805</td>
      <td>41.875996</td>
    </tr>
    <tr>
      <th>33</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>911</td>
      <td>8.365755</td>
      <td>12.340913</td>
      <td>6.055570</td>
      <td>4.737850</td>
      <td>4.451369</td>
      <td>3.291192</td>
      <td>2.254622</td>
      <td>1.987984</td>
      <td>...</td>
      <td>45.649204</td>
      <td>45.279106</td>
      <td>44.228539</td>
      <td>45.560150</td>
      <td>44.004513</td>
      <td>45.451752</td>
      <td>44.573612</td>
      <td>44.313133</td>
      <td>44.938354</td>
      <td>44.885864</td>
    </tr>
    <tr>
      <th>34</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>912</td>
      <td>7.755309</td>
      <td>12.361582</td>
      <td>5.754279</td>
      <td>4.510909</td>
      <td>3.683419</td>
      <td>2.989809</td>
      <td>2.239138</td>
      <td>1.859932</td>
      <td>...</td>
      <td>42.767139</td>
      <td>42.336288</td>
      <td>41.331120</td>
      <td>42.436756</td>
      <td>41.684254</td>
      <td>42.417118</td>
      <td>41.477863</td>
      <td>41.362335</td>
      <td>42.096577</td>
      <td>41.973705</td>
    </tr>
    <tr>
      <th>35</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>913</td>
      <td>7.122913</td>
      <td>11.877316</td>
      <td>6.892590</td>
      <td>4.961846</td>
      <td>4.327274</td>
      <td>3.118866</td>
      <td>2.508498</td>
      <td>2.138189</td>
      <td>...</td>
      <td>38.523857</td>
      <td>38.142170</td>
      <td>37.192219</td>
      <td>38.290588</td>
      <td>37.585289</td>
      <td>38.046993</td>
      <td>37.458794</td>
      <td>37.296215</td>
      <td>37.876701</td>
      <td>37.846321</td>
    </tr>
    <tr>
      <th>36</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>914</td>
      <td>7.722693</td>
      <td>13.433213</td>
      <td>6.761981</td>
      <td>4.856444</td>
      <td>3.743105</td>
      <td>2.982534</td>
      <td>2.461215</td>
      <td>2.062335</td>
      <td>...</td>
      <td>48.972168</td>
      <td>48.546608</td>
      <td>47.056313</td>
      <td>48.416878</td>
      <td>47.996143</td>
      <td>48.298695</td>
      <td>47.345364</td>
      <td>47.046642</td>
      <td>47.961697</td>
      <td>47.986835</td>
    </tr>
    <tr>
      <th>37</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>915</td>
      <td>7.725030</td>
      <td>11.052719</td>
      <td>6.663088</td>
      <td>5.057089</td>
      <td>3.447933</td>
      <td>3.124759</td>
      <td>2.375962</td>
      <td>2.051084</td>
      <td>...</td>
      <td>46.610313</td>
      <td>46.200542</td>
      <td>44.802040</td>
      <td>46.019176</td>
      <td>45.863613</td>
      <td>45.803249</td>
      <td>44.921337</td>
      <td>44.851391</td>
      <td>45.774323</td>
      <td>45.598038</td>
    </tr>
    <tr>
      <th>38</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>916</td>
      <td>7.591694</td>
      <td>12.025175</td>
      <td>6.902575</td>
      <td>4.726539</td>
      <td>3.803775</td>
      <td>3.225370</td>
      <td>2.517198</td>
      <td>2.167479</td>
      <td>...</td>
      <td>47.249176</td>
      <td>46.941048</td>
      <td>45.536686</td>
      <td>46.785034</td>
      <td>46.375957</td>
      <td>46.834408</td>
      <td>45.817791</td>
      <td>45.817036</td>
      <td>46.511391</td>
      <td>46.343300</td>
    </tr>
    <tr>
      <th>39</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>917</td>
      <td>7.740458</td>
      <td>12.813018</td>
      <td>6.744251</td>
      <td>4.722281</td>
      <td>4.015078</td>
      <td>3.286421</td>
      <td>2.402844</td>
      <td>2.121481</td>
      <td>...</td>
      <td>47.565178</td>
      <td>47.211433</td>
      <td>45.898144</td>
      <td>47.103230</td>
      <td>46.536907</td>
      <td>47.184261</td>
      <td>46.145023</td>
      <td>46.001781</td>
      <td>46.891209</td>
      <td>46.768360</td>
    </tr>
    <tr>
      <th>40</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>918</td>
      <td>8.190433</td>
      <td>13.093901</td>
      <td>7.376089</td>
      <td>4.867056</td>
      <td>3.657851</td>
      <td>3.631400</td>
      <td>2.795508</td>
      <td>2.494714</td>
      <td>...</td>
      <td>48.311169</td>
      <td>47.838398</td>
      <td>46.746750</td>
      <td>48.233326</td>
      <td>46.831379</td>
      <td>47.917675</td>
      <td>47.090836</td>
      <td>46.953537</td>
      <td>47.744019</td>
      <td>47.643070</td>
    </tr>
  </tbody>
</table>
<p>41 rows × 242 columns</p>
</div></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="batch.spectra_to_df">
<h2><span class="section-number">7.9. </span><code class="docutils literal notranslate"><span class="pre">batch.spectra_to_df</span></code><a class="headerlink" href="#batch.spectra_to_df" title="Permalink to this headline">¶</a></h2>
<p>Reads all the .spec files in a direcory and returns their data as a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> object. <code class="docutils literal notranslate"><span class="pre">batch.spectra_to_df</span></code> is identical to <code class="docutils literal notranslate"><span class="pre">batch.spectra_to_csv</span></code> except a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> is returned rather than saving a <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file. <a class="reference external" href="api/hs_process.batch.html#hs_process.batch.spectra_to_df">[API]</a></p>
<p><strong>Note:</strong> The following example builds on the results of the <code class="docutils literal notranslate"><span class="pre">`batch.segment_band_math</span></code> tutorial &lt;tutorial_batch.html#batch.segment_band_math&gt;`__ and <code class="docutils literal notranslate"><span class="pre">`batch.segment_create_mask</span></code> &lt;tutorial_batch.html#batch.segment_create_mask&gt;`__. Please complete each of those tutorial examples to be sure your directory (i.e., <code class="docutils literal notranslate"><span class="pre">F:\\nigo0024\Documents\hs_process_demo\spatial_mod\crop_many_gdf\mask_mcari2_90th</span></code>) is populated with image files.</p>
<p>Load and initialize the <code class="docutils literal notranslate"><span class="pre">batch</span></code> module, checking to be sure the directory exists.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">hs_process</span> <span class="kn">import</span> <span class="n">batch</span>

<span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">&#39;spatial_mod&#39;</span><span class="p">,</span> <span class="s1">&#39;crop_many_gdf&#39;</span><span class="p">,</span> <span class="s1">&#39;mask_mcari2_90th&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">base_dir</span><span class="p">))</span>
<span class="n">hsbatch</span> <span class="o">=</span> <span class="n">batch</span><span class="p">(</span><span class="n">base_dir</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>Read all the <code class="docutils literal notranslate"><span class="pre">.spec</span></code> files in <code class="docutils literal notranslate"><span class="pre">base_dir</span></code> and load them to <code class="docutils literal notranslate"><span class="pre">df_spec</span></code>, a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df_spec</span> <span class="o">=</span> <span class="n">hsbatch</span><span class="o">.</span><span class="n">spectra_to_df</span><span class="p">(</span><span class="n">base_dir</span><span class="o">=</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">search_ext</span><span class="o">=</span><span class="s1">&#39;spec&#39;</span><span class="p">,</span> <span class="n">dir_level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df_spec</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Writing mean spectra to a ``pandas.DataFrame``.
Number of input datacubes/spectra: 40
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fname</th>
      <th>plot_id</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>...</th>
      <th>231</th>
      <th>232</th>
      <th>233</th>
      <th>234</th>
      <th>235</th>
      <th>236</th>
      <th>237</th>
      <th>238</th>
      <th>239</th>
      <th>240</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1011</td>
      <td>0.064227</td>
      <td>0.111654</td>
      <td>0.054006</td>
      <td>0.045123</td>
      <td>0.034754</td>
      <td>0.025221</td>
      <td>0.020441</td>
      <td>0.016978</td>
      <td>...</td>
      <td>0.459527</td>
      <td>0.451780</td>
      <td>0.441782</td>
      <td>0.455957</td>
      <td>0.442371</td>
      <td>0.451929</td>
      <td>0.447071</td>
      <td>0.443177</td>
      <td>0.449773</td>
      <td>0.448854</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1012</td>
      <td>0.081125</td>
      <td>0.106183</td>
      <td>0.059173</td>
      <td>0.043604</td>
      <td>0.036323</td>
      <td>0.030721</td>
      <td>0.022773</td>
      <td>0.019067</td>
      <td>...</td>
      <td>0.449073</td>
      <td>0.445441</td>
      <td>0.433849</td>
      <td>0.446756</td>
      <td>0.438802</td>
      <td>0.443943</td>
      <td>0.437288</td>
      <td>0.434445</td>
      <td>0.442775</td>
      <td>0.441923</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1013</td>
      <td>0.075462</td>
      <td>0.114875</td>
      <td>0.060519</td>
      <td>0.046322</td>
      <td>0.036862</td>
      <td>0.028324</td>
      <td>0.022357</td>
      <td>0.019912</td>
      <td>...</td>
      <td>0.405901</td>
      <td>0.402347</td>
      <td>0.391944</td>
      <td>0.402602</td>
      <td>0.396482</td>
      <td>0.400961</td>
      <td>0.393189</td>
      <td>0.392176</td>
      <td>0.399043</td>
      <td>0.398734</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1014</td>
      <td>0.079184</td>
      <td>0.117992</td>
      <td>0.064792</td>
      <td>0.047713</td>
      <td>0.034519</td>
      <td>0.027633</td>
      <td>0.023475</td>
      <td>0.019485</td>
      <td>...</td>
      <td>0.462630</td>
      <td>0.458024</td>
      <td>0.444008</td>
      <td>0.458249</td>
      <td>0.454361</td>
      <td>0.456649</td>
      <td>0.446914</td>
      <td>0.445913</td>
      <td>0.453211</td>
      <td>0.452600</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1015</td>
      <td>0.080511</td>
      <td>0.126319</td>
      <td>0.060977</td>
      <td>0.045235</td>
      <td>0.036596</td>
      <td>0.030610</td>
      <td>0.022911</td>
      <td>0.020116</td>
      <td>...</td>
      <td>0.467540</td>
      <td>0.463856</td>
      <td>0.449361</td>
      <td>0.462000</td>
      <td>0.459388</td>
      <td>0.461193</td>
      <td>0.452906</td>
      <td>0.451302</td>
      <td>0.458128</td>
      <td>0.457858</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1016</td>
      <td>0.081939</td>
      <td>0.124275</td>
      <td>0.061102</td>
      <td>0.047460</td>
      <td>0.035919</td>
      <td>0.029236</td>
      <td>0.024467</td>
      <td>0.019764</td>
      <td>...</td>
      <td>0.456503</td>
      <td>0.452797</td>
      <td>0.439896</td>
      <td>0.450442</td>
      <td>0.446383</td>
      <td>0.451597</td>
      <td>0.441958</td>
      <td>0.442066</td>
      <td>0.448256</td>
      <td>0.448065</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1017</td>
      <td>0.077316</td>
      <td>0.110728</td>
      <td>0.064149</td>
      <td>0.043794</td>
      <td>0.035680</td>
      <td>0.030879</td>
      <td>0.027063</td>
      <td>0.022540</td>
      <td>...</td>
      <td>0.450702</td>
      <td>0.447073</td>
      <td>0.436494</td>
      <td>0.448031</td>
      <td>0.442257</td>
      <td>0.447222</td>
      <td>0.438068</td>
      <td>0.437374</td>
      <td>0.443915</td>
      <td>0.444940</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1018</td>
      <td>0.091871</td>
      <td>0.126645</td>
      <td>0.072223</td>
      <td>0.051667</td>
      <td>0.037559</td>
      <td>0.035024</td>
      <td>0.025858</td>
      <td>0.024398</td>
      <td>...</td>
      <td>0.439747</td>
      <td>0.435895</td>
      <td>0.426552</td>
      <td>0.438625</td>
      <td>0.426189</td>
      <td>0.435942</td>
      <td>0.427097</td>
      <td>0.426720</td>
      <td>0.434411</td>
      <td>0.432564</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>611</td>
      <td>0.078947</td>
      <td>0.129258</td>
      <td>0.061471</td>
      <td>0.046581</td>
      <td>0.036378</td>
      <td>0.028927</td>
      <td>0.021763</td>
      <td>0.019296</td>
      <td>...</td>
      <td>0.489104</td>
      <td>0.484329</td>
      <td>0.472866</td>
      <td>0.487329</td>
      <td>0.472000</td>
      <td>0.484845</td>
      <td>0.475809</td>
      <td>0.473187</td>
      <td>0.480569</td>
      <td>0.478926</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>612</td>
      <td>0.080529</td>
      <td>0.121211</td>
      <td>0.064768</td>
      <td>0.045940</td>
      <td>0.039631</td>
      <td>0.033525</td>
      <td>0.025847</td>
      <td>0.021764</td>
      <td>...</td>
      <td>0.492437</td>
      <td>0.487847</td>
      <td>0.476166</td>
      <td>0.489796</td>
      <td>0.481662</td>
      <td>0.487915</td>
      <td>0.479497</td>
      <td>0.478541</td>
      <td>0.486780</td>
      <td>0.485591</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>613</td>
      <td>0.071019</td>
      <td>0.138694</td>
      <td>0.060379</td>
      <td>0.047469</td>
      <td>0.040506</td>
      <td>0.030691</td>
      <td>0.023712</td>
      <td>0.021108</td>
      <td>...</td>
      <td>0.468473</td>
      <td>0.463580</td>
      <td>0.451198</td>
      <td>0.462590</td>
      <td>0.458152</td>
      <td>0.460913</td>
      <td>0.453314</td>
      <td>0.452501</td>
      <td>0.459027</td>
      <td>0.458672</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>614</td>
      <td>0.077675</td>
      <td>0.115175</td>
      <td>0.065045</td>
      <td>0.050026</td>
      <td>0.041082</td>
      <td>0.031503</td>
      <td>0.023359</td>
      <td>0.020774</td>
      <td>...</td>
      <td>0.484368</td>
      <td>0.480114</td>
      <td>0.466137</td>
      <td>0.480122</td>
      <td>0.476320</td>
      <td>0.477822</td>
      <td>0.469210</td>
      <td>0.467757</td>
      <td>0.475263</td>
      <td>0.476896</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>615</td>
      <td>0.083387</td>
      <td>0.121953</td>
      <td>0.064516</td>
      <td>0.042406</td>
      <td>0.037761</td>
      <td>0.031138</td>
      <td>0.023565</td>
      <td>0.020219</td>
      <td>...</td>
      <td>0.507347</td>
      <td>0.502872</td>
      <td>0.487814</td>
      <td>0.502753</td>
      <td>0.498952</td>
      <td>0.500990</td>
      <td>0.492016</td>
      <td>0.491574</td>
      <td>0.499285</td>
      <td>0.499450</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>616</td>
      <td>0.084624</td>
      <td>0.122280</td>
      <td>0.062212</td>
      <td>0.050201</td>
      <td>0.038598</td>
      <td>0.029636</td>
      <td>0.026161</td>
      <td>0.021490</td>
      <td>...</td>
      <td>0.508821</td>
      <td>0.506109</td>
      <td>0.491433</td>
      <td>0.503537</td>
      <td>0.500761</td>
      <td>0.504246</td>
      <td>0.495869</td>
      <td>0.493646</td>
      <td>0.503277</td>
      <td>0.501584</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>617</td>
      <td>0.078369</td>
      <td>0.123027</td>
      <td>0.065165</td>
      <td>0.050287</td>
      <td>0.037866</td>
      <td>0.031581</td>
      <td>0.025126</td>
      <td>0.022118</td>
      <td>...</td>
      <td>0.505426</td>
      <td>0.498985</td>
      <td>0.487394</td>
      <td>0.500949</td>
      <td>0.491359</td>
      <td>0.498183</td>
      <td>0.492132</td>
      <td>0.488491</td>
      <td>0.496064</td>
      <td>0.495416</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>618</td>
      <td>0.076991</td>
      <td>0.124798</td>
      <td>0.075132</td>
      <td>0.050802</td>
      <td>0.037669</td>
      <td>0.040400</td>
      <td>0.028900</td>
      <td>0.024812</td>
      <td>...</td>
      <td>0.434235</td>
      <td>0.430238</td>
      <td>0.420839</td>
      <td>0.433212</td>
      <td>0.420222</td>
      <td>0.430361</td>
      <td>0.422869</td>
      <td>0.421693</td>
      <td>0.428790</td>
      <td>0.426296</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>711</td>
      <td>0.074135</td>
      <td>0.119799</td>
      <td>0.063318</td>
      <td>0.046162</td>
      <td>0.037412</td>
      <td>0.029530</td>
      <td>0.021304</td>
      <td>0.018660</td>
      <td>...</td>
      <td>0.489605</td>
      <td>0.483335</td>
      <td>0.473196</td>
      <td>0.488176</td>
      <td>0.471476</td>
      <td>0.484578</td>
      <td>0.476017</td>
      <td>0.474434</td>
      <td>0.481776</td>
      <td>0.480791</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>712</td>
      <td>0.085637</td>
      <td>0.127563</td>
      <td>0.065128</td>
      <td>0.046038</td>
      <td>0.040786</td>
      <td>0.030011</td>
      <td>0.023458</td>
      <td>0.021830</td>
      <td>...</td>
      <td>0.453643</td>
      <td>0.449421</td>
      <td>0.437348</td>
      <td>0.448590</td>
      <td>0.440966</td>
      <td>0.448911</td>
      <td>0.439875</td>
      <td>0.439346</td>
      <td>0.445844</td>
      <td>0.445161</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>713</td>
      <td>0.071933</td>
      <td>0.124327</td>
      <td>0.063410</td>
      <td>0.047515</td>
      <td>0.038846</td>
      <td>0.032254</td>
      <td>0.023863</td>
      <td>0.019787</td>
      <td>...</td>
      <td>0.471911</td>
      <td>0.469489</td>
      <td>0.454651</td>
      <td>0.468036</td>
      <td>0.461623</td>
      <td>0.466041</td>
      <td>0.457233</td>
      <td>0.456591</td>
      <td>0.462858</td>
      <td>0.462233</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>714</td>
      <td>0.075068</td>
      <td>0.121631</td>
      <td>0.062356</td>
      <td>0.050519</td>
      <td>0.035653</td>
      <td>0.031033</td>
      <td>0.025148</td>
      <td>0.021016</td>
      <td>...</td>
      <td>0.501473</td>
      <td>0.497548</td>
      <td>0.482398</td>
      <td>0.495428</td>
      <td>0.490639</td>
      <td>0.494371</td>
      <td>0.485588</td>
      <td>0.482622</td>
      <td>0.491237</td>
      <td>0.491255</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>715</td>
      <td>0.078434</td>
      <td>0.113343</td>
      <td>0.060710</td>
      <td>0.047555</td>
      <td>0.036125</td>
      <td>0.029461</td>
      <td>0.024820</td>
      <td>0.021275</td>
      <td>...</td>
      <td>0.502211</td>
      <td>0.499180</td>
      <td>0.483275</td>
      <td>0.498612</td>
      <td>0.494855</td>
      <td>0.497589</td>
      <td>0.487019</td>
      <td>0.485618</td>
      <td>0.494481</td>
      <td>0.493391</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>716</td>
      <td>0.085955</td>
      <td>0.126862</td>
      <td>0.067146</td>
      <td>0.050898</td>
      <td>0.040466</td>
      <td>0.033537</td>
      <td>0.026461</td>
      <td>0.022886</td>
      <td>...</td>
      <td>0.517279</td>
      <td>0.513722</td>
      <td>0.499584</td>
      <td>0.511967</td>
      <td>0.508291</td>
      <td>0.512053</td>
      <td>0.502348</td>
      <td>0.500527</td>
      <td>0.510058</td>
      <td>0.510106</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>717</td>
      <td>0.083933</td>
      <td>0.135842</td>
      <td>0.075537</td>
      <td>0.052262</td>
      <td>0.038914</td>
      <td>0.033324</td>
      <td>0.026031</td>
      <td>0.023081</td>
      <td>...</td>
      <td>0.494704</td>
      <td>0.490009</td>
      <td>0.478698</td>
      <td>0.490446</td>
      <td>0.481846</td>
      <td>0.489506</td>
      <td>0.479848</td>
      <td>0.479493</td>
      <td>0.485440</td>
      <td>0.486532</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>718</td>
      <td>0.088435</td>
      <td>0.126796</td>
      <td>0.070236</td>
      <td>0.054423</td>
      <td>0.035480</td>
      <td>0.036542</td>
      <td>0.028013</td>
      <td>0.024086</td>
      <td>...</td>
      <td>0.499659</td>
      <td>0.495968</td>
      <td>0.485669</td>
      <td>0.499344</td>
      <td>0.484595</td>
      <td>0.497340</td>
      <td>0.489118</td>
      <td>0.487047</td>
      <td>0.493736</td>
      <td>0.492342</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>811</td>
      <td>0.070837</td>
      <td>0.120063</td>
      <td>0.060470</td>
      <td>0.046877</td>
      <td>0.037144</td>
      <td>0.031125</td>
      <td>0.022014</td>
      <td>0.019553</td>
      <td>...</td>
      <td>0.458945</td>
      <td>0.456831</td>
      <td>0.445125</td>
      <td>0.459091</td>
      <td>0.444182</td>
      <td>0.455599</td>
      <td>0.446539</td>
      <td>0.445960</td>
      <td>0.452538</td>
      <td>0.452340</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>812</td>
      <td>0.081007</td>
      <td>0.118825</td>
      <td>0.065568</td>
      <td>0.051567</td>
      <td>0.038088</td>
      <td>0.032050</td>
      <td>0.022568</td>
      <td>0.019858</td>
      <td>...</td>
      <td>0.476415</td>
      <td>0.473208</td>
      <td>0.461464</td>
      <td>0.474319</td>
      <td>0.465295</td>
      <td>0.472102</td>
      <td>0.462630</td>
      <td>0.462280</td>
      <td>0.470413</td>
      <td>0.469206</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>813</td>
      <td>0.073921</td>
      <td>0.116927</td>
      <td>0.068680</td>
      <td>0.047669</td>
      <td>0.033005</td>
      <td>0.032518</td>
      <td>0.024839</td>
      <td>0.019828</td>
      <td>...</td>
      <td>0.483536</td>
      <td>0.478450</td>
      <td>0.465250</td>
      <td>0.479335</td>
      <td>0.473880</td>
      <td>0.477437</td>
      <td>0.467582</td>
      <td>0.466752</td>
      <td>0.474349</td>
      <td>0.474071</td>
    </tr>
    <tr>
      <th>27</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>814</td>
      <td>0.086768</td>
      <td>0.127979</td>
      <td>0.062455</td>
      <td>0.051147</td>
      <td>0.040338</td>
      <td>0.032564</td>
      <td>0.025599</td>
      <td>0.023100</td>
      <td>...</td>
      <td>0.470456</td>
      <td>0.467198</td>
      <td>0.453820</td>
      <td>0.466697</td>
      <td>0.463939</td>
      <td>0.465226</td>
      <td>0.456012</td>
      <td>0.454781</td>
      <td>0.462208</td>
      <td>0.462008</td>
    </tr>
    <tr>
      <th>28</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>815</td>
      <td>0.084545</td>
      <td>0.116523</td>
      <td>0.067489</td>
      <td>0.047146</td>
      <td>0.037510</td>
      <td>0.032990</td>
      <td>0.025197</td>
      <td>0.022140</td>
      <td>...</td>
      <td>0.445874</td>
      <td>0.442600</td>
      <td>0.428107</td>
      <td>0.442265</td>
      <td>0.438105</td>
      <td>0.439458</td>
      <td>0.431912</td>
      <td>0.429861</td>
      <td>0.436736</td>
      <td>0.436862</td>
    </tr>
    <tr>
      <th>29</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>816</td>
      <td>0.081752</td>
      <td>0.136491</td>
      <td>0.071796</td>
      <td>0.055479</td>
      <td>0.039778</td>
      <td>0.033140</td>
      <td>0.027673</td>
      <td>0.023326</td>
      <td>...</td>
      <td>0.457297</td>
      <td>0.452390</td>
      <td>0.441239</td>
      <td>0.452028</td>
      <td>0.447716</td>
      <td>0.450664</td>
      <td>0.444218</td>
      <td>0.441961</td>
      <td>0.450220</td>
      <td>0.450060</td>
    </tr>
    <tr>
      <th>30</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>817</td>
      <td>0.082961</td>
      <td>0.130929</td>
      <td>0.073539</td>
      <td>0.055554</td>
      <td>0.043000</td>
      <td>0.039540</td>
      <td>0.028973</td>
      <td>0.026129</td>
      <td>...</td>
      <td>0.501664</td>
      <td>0.498344</td>
      <td>0.487050</td>
      <td>0.498293</td>
      <td>0.492348</td>
      <td>0.498224</td>
      <td>0.489995</td>
      <td>0.487100</td>
      <td>0.496349</td>
      <td>0.494761</td>
    </tr>
    <tr>
      <th>31</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>818</td>
      <td>0.089243</td>
      <td>0.145230</td>
      <td>0.080388</td>
      <td>0.050966</td>
      <td>0.046700</td>
      <td>0.044176</td>
      <td>0.031666</td>
      <td>0.028662</td>
      <td>...</td>
      <td>0.426273</td>
      <td>0.423250</td>
      <td>0.414085</td>
      <td>0.426564</td>
      <td>0.412979</td>
      <td>0.422991</td>
      <td>0.415255</td>
      <td>0.413091</td>
      <td>0.418968</td>
      <td>0.418760</td>
    </tr>
    <tr>
      <th>32</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>911</td>
      <td>0.083658</td>
      <td>0.123409</td>
      <td>0.060556</td>
      <td>0.047379</td>
      <td>0.044514</td>
      <td>0.032912</td>
      <td>0.022546</td>
      <td>0.019880</td>
      <td>...</td>
      <td>0.456492</td>
      <td>0.452791</td>
      <td>0.442285</td>
      <td>0.455601</td>
      <td>0.440045</td>
      <td>0.454518</td>
      <td>0.445736</td>
      <td>0.443131</td>
      <td>0.449384</td>
      <td>0.448859</td>
    </tr>
    <tr>
      <th>33</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>912</td>
      <td>0.077553</td>
      <td>0.123616</td>
      <td>0.057543</td>
      <td>0.045109</td>
      <td>0.036834</td>
      <td>0.029898</td>
      <td>0.022391</td>
      <td>0.018599</td>
      <td>...</td>
      <td>0.427671</td>
      <td>0.423363</td>
      <td>0.413311</td>
      <td>0.424368</td>
      <td>0.416843</td>
      <td>0.424171</td>
      <td>0.414779</td>
      <td>0.413623</td>
      <td>0.420966</td>
      <td>0.419737</td>
    </tr>
    <tr>
      <th>34</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>913</td>
      <td>0.071229</td>
      <td>0.118773</td>
      <td>0.068926</td>
      <td>0.049618</td>
      <td>0.043273</td>
      <td>0.031189</td>
      <td>0.025085</td>
      <td>0.021382</td>
      <td>...</td>
      <td>0.385239</td>
      <td>0.381422</td>
      <td>0.371922</td>
      <td>0.382906</td>
      <td>0.375853</td>
      <td>0.380470</td>
      <td>0.374588</td>
      <td>0.372962</td>
      <td>0.378767</td>
      <td>0.378463</td>
    </tr>
    <tr>
      <th>35</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>914</td>
      <td>0.077227</td>
      <td>0.134332</td>
      <td>0.067620</td>
      <td>0.048564</td>
      <td>0.037431</td>
      <td>0.029825</td>
      <td>0.024612</td>
      <td>0.020623</td>
      <td>...</td>
      <td>0.489722</td>
      <td>0.485466</td>
      <td>0.470563</td>
      <td>0.484169</td>
      <td>0.479961</td>
      <td>0.482987</td>
      <td>0.473454</td>
      <td>0.470466</td>
      <td>0.479617</td>
      <td>0.479868</td>
    </tr>
    <tr>
      <th>36</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>915</td>
      <td>0.077250</td>
      <td>0.110527</td>
      <td>0.066631</td>
      <td>0.050571</td>
      <td>0.034479</td>
      <td>0.031248</td>
      <td>0.023760</td>
      <td>0.020511</td>
      <td>...</td>
      <td>0.466103</td>
      <td>0.462005</td>
      <td>0.448020</td>
      <td>0.460192</td>
      <td>0.458636</td>
      <td>0.458032</td>
      <td>0.449213</td>
      <td>0.448514</td>
      <td>0.457743</td>
      <td>0.455980</td>
    </tr>
    <tr>
      <th>37</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>916</td>
      <td>0.075917</td>
      <td>0.120252</td>
      <td>0.069026</td>
      <td>0.047265</td>
      <td>0.038038</td>
      <td>0.032254</td>
      <td>0.025172</td>
      <td>0.021675</td>
      <td>...</td>
      <td>0.472492</td>
      <td>0.469410</td>
      <td>0.455367</td>
      <td>0.467850</td>
      <td>0.463760</td>
      <td>0.468344</td>
      <td>0.458178</td>
      <td>0.458170</td>
      <td>0.465114</td>
      <td>0.463433</td>
    </tr>
    <tr>
      <th>38</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>917</td>
      <td>0.077405</td>
      <td>0.128130</td>
      <td>0.067443</td>
      <td>0.047223</td>
      <td>0.040151</td>
      <td>0.032864</td>
      <td>0.024028</td>
      <td>0.021215</td>
      <td>...</td>
      <td>0.475652</td>
      <td>0.472114</td>
      <td>0.458981</td>
      <td>0.471032</td>
      <td>0.465369</td>
      <td>0.471843</td>
      <td>0.461450</td>
      <td>0.460018</td>
      <td>0.468912</td>
      <td>0.467684</td>
    </tr>
    <tr>
      <th>39</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>918</td>
      <td>0.081904</td>
      <td>0.130939</td>
      <td>0.073761</td>
      <td>0.048671</td>
      <td>0.036579</td>
      <td>0.036314</td>
      <td>0.027955</td>
      <td>0.024947</td>
      <td>...</td>
      <td>0.483112</td>
      <td>0.478384</td>
      <td>0.467467</td>
      <td>0.482333</td>
      <td>0.468314</td>
      <td>0.479177</td>
      <td>0.470908</td>
      <td>0.469535</td>
      <td>0.477440</td>
      <td>0.476431</td>
    </tr>
  </tbody>
</table>
<p>40 rows × 242 columns</p>
</div></div>
</div>
<p>Each row is a <code class="docutils literal notranslate"><span class="pre">.spec</span></code> file from a different plot, and each column is a particular spectral band.</p>
<p>It is somewhat confusing to conceptualize spectral data by band number (as opposed to the wavelenth it represents). <code class="docutils literal notranslate"><span class="pre">hs_process.hs_tools.get_band</span></code> can be used to retrieve spectral data for all plots via indexing by wavelength. Say we need to access reflectance at 710 nm for each plot (in this case, the 710 nm band is band number 155).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df_710nm</span> <span class="o">=</span> <span class="n">df_spec</span><span class="p">[[</span><span class="s1">&#39;fname&#39;</span><span class="p">,</span> <span class="s1">&#39;plot_id&#39;</span><span class="p">,</span> <span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">get_band</span><span class="p">(</span><span class="mi">710</span><span class="p">)]]</span>
<span class="n">df_710nm</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fname</th>
      <th>plot_id</th>
      <th>155</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1011</td>
      <td>0.057691</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1012</td>
      <td>0.061125</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1013</td>
      <td>0.068554</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1014</td>
      <td>0.065782</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1015</td>
      <td>0.068864</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1016</td>
      <td>0.067865</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1017</td>
      <td>0.078624</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_10...</td>
      <td>1018</td>
      <td>0.083274</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>611</td>
      <td>0.068968</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>612</td>
      <td>0.069943</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>613</td>
      <td>0.080705</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>614</td>
      <td>0.073068</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>615</td>
      <td>0.069128</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>616</td>
      <td>0.073243</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>617</td>
      <td>0.073029</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_61...</td>
      <td>618</td>
      <td>0.082816</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>711</td>
      <td>0.062415</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>712</td>
      <td>0.071282</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>713</td>
      <td>0.071761</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>714</td>
      <td>0.071243</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>715</td>
      <td>0.070207</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>716</td>
      <td>0.072630</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>717</td>
      <td>0.082647</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_71...</td>
      <td>718</td>
      <td>0.075310</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>811</td>
      <td>0.067439</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>812</td>
      <td>0.065353</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>813</td>
      <td>0.076600</td>
    </tr>
    <tr>
      <th>27</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>814</td>
      <td>0.080333</td>
    </tr>
    <tr>
      <th>28</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>815</td>
      <td>0.082084</td>
    </tr>
    <tr>
      <th>29</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>816</td>
      <td>0.079716</td>
    </tr>
    <tr>
      <th>30</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>817</td>
      <td>0.079085</td>
    </tr>
    <tr>
      <th>31</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_81...</td>
      <td>818</td>
      <td>0.097097</td>
    </tr>
    <tr>
      <th>32</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>911</td>
      <td>0.058718</td>
    </tr>
    <tr>
      <th>33</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>912</td>
      <td>0.065625</td>
    </tr>
    <tr>
      <th>34</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>913</td>
      <td>0.081310</td>
    </tr>
    <tr>
      <th>35</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>914</td>
      <td>0.068121</td>
    </tr>
    <tr>
      <th>36</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>915</td>
      <td>0.073891</td>
    </tr>
    <tr>
      <th>37</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>916</td>
      <td>0.071346</td>
    </tr>
    <tr>
      <th>38</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>917</td>
      <td>0.074224</td>
    </tr>
    <tr>
      <th>39</th>
      <td>Wells_rep2_20180628_16h56m_pika_gige_7_plot_91...</td>
      <td>918</td>
      <td>0.071906</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="batch.spectral_clip">
<h2><span class="section-number">7.10. </span><code class="docutils literal notranslate"><span class="pre">batch.spectral_clip</span></code><a class="headerlink" href="#batch.spectral_clip" title="Permalink to this headline">¶</a></h2>
<p>Batch processing tool to spectrally clip multiple datacubes in the same way. <a class="reference external" href="api/hs_process.batch.html#hs_process.batch.spectral_clip">[API]</a></p>
<p><strong>Note:</strong> The following example builds on the results of the <code class="docutils literal notranslate"><span class="pre">`batch.spatial_crop</span></code> tutorial &lt;tutorial_batch.html#batch.spatial_crop&gt;`__. Please complete the <code class="docutils literal notranslate"><span class="pre">batch.spatial_crop</span></code> tutorial example to be sure your directory (i.e., <code class="docutils literal notranslate"><span class="pre">base_dir</span></code>) is populated with multiple hyperspectral datacubes. The following example will be using datacubes located in teh following directory: <code class="docutils literal notranslate"><span class="pre">F:\\nigo0024\Documents\hs_process_demo\spatial_crop</span></code></p>
<p>Load and initialize the <code class="docutils literal notranslate"><span class="pre">batch</span></code> module, checking to be sure the directory exists.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">hs_process</span> <span class="kn">import</span> <span class="n">batch</span>

<span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">&#39;spatial_crop&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">base_dir</span><span class="p">))</span>
<span class="n">hsbatch</span> <span class="o">=</span> <span class="n">batch</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">search_ext</span><span class="o">=</span><span class="s1">&#39;.bip&#39;</span><span class="p">)</span>  <span class="c1"># searches for all files in ``base_dir`` with a &quot;.bip&quot; file extension</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">batch.spectral_clip</span></code> to clip all spectral bands below <em>420 nm</em> and above <em>880 nm</em>, as well as the bands near the oxygen absorption (i.e., <em>760-776 nm</em>) and water absorption (i.e., <em>813-827 nm</em>) regions.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">hsbatch</span><span class="o">.</span><span class="n">spectral_clip</span><span class="p">(</span><span class="n">base_dir</span><span class="o">=</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">folder_name</span><span class="o">=</span><span class="s1">&#39;spec_clip&#39;</span><span class="p">,</span>
                      <span class="n">wl_bands</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">420</span><span class="p">],</span> <span class="p">[</span><span class="mi">760</span><span class="p">,</span> <span class="mi">776</span><span class="p">],</span> <span class="p">[</span><span class="mi">813</span><span class="p">,</span> <span class="mi">827</span><span class="p">],</span> <span class="p">[</span><span class="mi">880</span><span class="p">,</span> <span class="mi">1000</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Processing 40 files. If this is not what is expected, please check if files have already undergone processing. If existing files should be overwritten, be sure to set the ``out_force`` parameter.


Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1011-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_1011-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1012-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_1012-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1013-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_1013-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1014-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_1014-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1015-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_1015-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1016-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_1016-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1017-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_1017-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1018-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_1018-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_611-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_611-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_612-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_612-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_613-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_613-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_614-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_614-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_615-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_615-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_616-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_616-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_617-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_617-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_618-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_618-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_711-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_711-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_712-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_712-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_713-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_713-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_714-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_714-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_715-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_715-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_716-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_716-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_717-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_717-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_718-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_718-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_811-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_811-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_812-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_812-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_813-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_813-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_814-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_814-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_815-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_815-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_816-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_816-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_817-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_817-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_818-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_818-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_911-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_911-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_912-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_912-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_913-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_913-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_914-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_914-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_915-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_915-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_916-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_916-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_917-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_917-spec-clip.bip

Spectrally clipping: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_918-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_clip\Wells_rep2_20180628_16h56m_pika_gige_7_918-spec-clip.bip
</pre></div></div>
</div>
<p>Use <a class="reference external" href="https://seaborn.pydata.org/index.html">Seaborn</a> to visualize the spectra of a single pixel in one of the processed images.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s1">&#39;Wells_rep2_20180628_16h56m_pika_gige_7_1011-spatial-crop.bip&#39;</span><span class="p">)</span>
<span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_cube</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="n">spy_mem</span> <span class="o">=</span> <span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">spyfile</span><span class="o">.</span><span class="n">open_memmap</span><span class="p">()</span>  <span class="c1"># datacube before clipping</span>
<span class="n">meta_bands</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">meta_bands</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s1">&#39;spec_clip&#39;</span><span class="p">,</span> <span class="s1">&#39;Wells_rep2_20180628_16h56m_pika_gige_7_1011-spec-clip.bip&#39;</span><span class="p">)</span>
<span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_cube</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="n">spy_mem_clip</span> <span class="o">=</span> <span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">spyfile</span><span class="o">.</span><span class="n">open_memmap</span><span class="p">()</span>  <span class="c1"># datacube after clipping</span>
<span class="n">meta_bands_clip</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">meta_bands</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">meta_bands</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">spy_mem</span><span class="p">[</span><span class="mi">26</span><span class="p">][</span><span class="mi">29</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Before spectral clipping&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">meta_bands_clip</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">spy_mem_clip</span><span class="p">[</span><span class="mi">26</span><span class="p">][</span><span class="mi">29</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;After spectral clipping&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Wavelength (nm)&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Reflectance (%)&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;API Example: `batch.spectral_clip`&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0.5, 1.0, &#39;API Example: `batch.spectral_clip`&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_57_1.png" src="_images/tutorial_batch_57_1.png" />
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="batch.spectral_smooth">
<h2><span class="section-number">7.11. </span><code class="docutils literal notranslate"><span class="pre">batch.spectral_smooth</span></code><a class="headerlink" href="#batch.spectral_smooth" title="Permalink to this headline">¶</a></h2>
<p>Batch processing tool to spectrally smooth multiple datacubes in the same way. <a class="reference external" href="api/hs_process.batch.html#hs_process.batch.spectral_smooth">[API]</a></p>
<p><strong>Note:</strong> The following example builds on the results of the <a class="reference external" href="tutorial_batch.html#batch.spatial_crop">batch.spatial_crop tutorial</a>. Please complete the <code class="docutils literal notranslate"><span class="pre">batch.spatial_crop</span></code> tutorial example to be sure your directory (i.e., <code class="docutils literal notranslate"><span class="pre">base_dir</span></code>) is populated with multiple hyperspectral datacubes. The following example will be using datacubes located in the following directory: <code class="docutils literal notranslate"><span class="pre">F:\\nigo0024\Documents\hs_process_demo\spatial_crop</span></code></p>
<p>Load and initialize the <code class="docutils literal notranslate"><span class="pre">batch</span></code> module, checking to be sure the directory exists.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">hs_process</span> <span class="kn">import</span> <span class="n">batch</span>

<span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">&#39;spatial_crop&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">base_dir</span><span class="p">))</span>
<span class="n">hsbatch</span> <span class="o">=</span> <span class="n">batch</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">search_ext</span><span class="o">=</span><span class="s1">&#39;.bip&#39;</span><span class="p">)</span>  <span class="c1"># searches for all files in ``base_dir`` with a &quot;.bip&quot; file extension</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">batch.spectral_smooth</span></code> to perform a <em>Savitzky-Golay</em> smoothing operation on each image/pixel in <code class="docutils literal notranslate"><span class="pre">base_dir</span></code>. The <code class="docutils literal notranslate"><span class="pre">window_size</span></code> and <code class="docutils literal notranslate"><span class="pre">order</span></code> can be adjusted to achieve desired smoothing results.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">hsbatch</span><span class="o">.</span><span class="n">spectral_smooth</span><span class="p">(</span><span class="n">base_dir</span><span class="o">=</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">folder_name</span><span class="o">=</span><span class="s1">&#39;spec_smooth&#39;</span><span class="p">,</span>
                        <span class="n">window_size</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Processing 40 files. If this is not what is expected, please check if files have already undergone processing. If existing files should be overwritten, be sure to set the ``out_force`` parameter.


Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1011-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_1011-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1012-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_1012-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1013-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_1013-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1014-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_1014-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1015-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_1015-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1016-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_1016-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1017-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_1017-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_1018-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_1018-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_611-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_611-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_612-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_612-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_613-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_613-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_614-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_614-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_615-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_615-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_616-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_616-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_617-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_617-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_618-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_618-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_711-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_711-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_712-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_712-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_713-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_713-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_714-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_714-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_715-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_715-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_716-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_716-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_717-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_717-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_718-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_718-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_811-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_811-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_812-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_812-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_813-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_813-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_814-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_814-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_815-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_815-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_816-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_816-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_817-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_817-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_818-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_818-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_911-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_911-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_912-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_912-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_913-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_913-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_914-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_914-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_915-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_915-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_916-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_916-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_917-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_917-spec-smooth.bip

Spectrally smoothing: F:\\nigo0024\Documents\hs_process_demo\spatial_crop\Wells_rep2_20180628_16h56m_pika_gige_7_918-spatial-crop.bip
Saving F:\nigo0024\Documents\hs_process_demo\spatial_crop\spec_smooth\Wells_rep2_20180628_16h56m_pika_gige_7_918-spec-smooth.bip
</pre></div></div>
</div>
<p>Use <a class="reference external" href="https://seaborn.pydata.org/index.html">Seaborn</a> to visualize the spectra of a single pixel in one of the processed images.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s1">&#39;Wells_rep2_20180628_16h56m_pika_gige_7_1011-spatial-crop.bip&#39;</span><span class="p">)</span>
<span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_cube</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="n">spy_mem</span> <span class="o">=</span> <span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">spyfile</span><span class="o">.</span><span class="n">open_memmap</span><span class="p">()</span>  <span class="c1"># datacube before smoothing</span>
<span class="n">meta_bands</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">meta_bands</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s1">&#39;spec_smooth&#39;</span><span class="p">,</span> <span class="s1">&#39;Wells_rep2_20180628_16h56m_pika_gige_7_1011-spec-smooth.bip&#39;</span><span class="p">)</span>
<span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_cube</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="n">spy_mem_clip</span> <span class="o">=</span> <span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">spyfile</span><span class="o">.</span><span class="n">open_memmap</span><span class="p">()</span>  <span class="c1"># datacube after smoothing</span>
<span class="n">meta_bands_clip</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">hsbatch</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">meta_bands</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">meta_bands</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">spy_mem</span><span class="p">[</span><span class="mi">26</span><span class="p">][</span><span class="mi">29</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Before spectral smoothing&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">meta_bands_clip</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">spy_mem_clip</span><span class="p">[</span><span class="mi">26</span><span class="p">][</span><span class="mi">29</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;After spectral smoothing&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Wavelength (nm)&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Reflectance (%)&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;API Example: `batch.spectral_smooth`&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0.5, 1.0, &#39;API Example: `batch.spectral_smooth`&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_batch_63_1.png" src="_images/tutorial_batch_63_1.png" />
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020, Tyler J. Nigon.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>